local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CommF = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CommF_")

local WindUI = loadstring(game:HttpGet(
    "https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"
))()

-- Âª∫Á´ãË¶ñÁ™óÔºàÂ∑≤Êï¥Âêà OpenButtonÔºâ
local Window = WindUI:CreateWindow({
    Title = "Xu-hub",
    Icon = "user-check",
    Author = "by xuez1025",
    Folder = "Xu-Hub",
    Size = UDim2.fromOffset(600, 400),
    Transparent = true,
    Theme = "Dark",

    -- ‚úÖ ‰ΩøÁî®ËÄÖÈ†≠ÂÉè / Profile
    User = {
        Enabled = true,
        Anonymous = false,
        Callback = function()
            WindUI:Notify({
                Title = "User Profile",
                Content = "User profile clicked!",
                Duration = 3
            })
        end
    },

    -- ‚úÖ Ë¶ñË¶∫ / ‰ªãÈù¢Ë®≠ÂÆö
    Acrylic = false,
    HideSearchBar = false,
    SideBarWidth = 200,

    -- üîΩ Á∏ÆÂ∞èÂæåÈ°ØÁ§∫ÁöÑÊµÆÂãïÊåâÈàï
    OpenButton = {
        Title = "Open Xu-hub",
        CornerRadius = UDim.new(1, 0), -- ÂÆåÂÖ®ÂúìÂΩ¢
        StrokeThickness = 3,
        Enabled = true,
        OnlyMobile = false,
        Draggable = true,
        OnlyIcon = false,

        Color = ColorSequence.new(
    Color3.fromHex("#7F00FF"),
    Color3.fromHex("#00C6FF")
),
    }
})

        -- ================= Ê†∏ÂøÉ ESP ÂäüËÉΩ =================
        local LocalPlayer = Players.LocalPlayer

        ESP_ENABLED = false
        local ESP_COLOR = Color3.fromRGB(30,30,30)
        local TEXT_COLOR = Color3.fromRGB(255,255,255)

        local function createESP(player)
            if player == LocalPlayer then return end
            if not player.Character then return end
            if player.Character:FindFirstChild("ESP_Highlight") then return end

            local h = Instance.new("Highlight")
            h.Name = "ESP_Highlight"
            h.FillColor = ESP_COLOR
            h.OutlineColor = Color3.fromRGB(255,255,255)
            h.FillTransparency = 0.2
            h.OutlineTransparency = 0
            h.Adornee = player.Character
            h.Parent = player.Character

            local head = player.Character:FindFirstChild("Head")
            if not head then return end

            local bill = Instance.new("BillboardGui")
            bill.Name = "ESP_Billboard"
			bill.Size = UDim2.fromOffset(140,48)
			bill.StudsOffset = Vector3.new(0,2.6,0)
            bill.AlwaysOnTop = true
            bill.Parent = head

            local text = Instance.new("TextLabel", bill)
            text.Name = "Info"
            text.Position = UDim2.new(0,0,0,0)
            text.BackgroundTransparency = 1
            text.TextColor3 = TEXT_COLOR
            text.TextStrokeTransparency = 0
            text.Font = Enum.Font.SourceSansBold
            text.TextYAlignment = Enum.TextYAlignment.Top
            text.Text = player.Name
			text.Size = UDim2.new(1, -8, 0.65, 0)
			text.Position = UDim2.new(0,4,0,2)
			text.TextScaled = true
			text.TextWrapped = true
			text.TextSize = 18
			text.TextXAlignment = Enum.TextXAlignment.Center

            local barBG = Instance.new("Frame", bill)
            barBG.Name = "HP_Background"
			barBG.Size = UDim2.new(0.9,0,0.12,0)
			barBG.Position = UDim2.new(0.05,0,0.78,0)
            barBG.BackgroundColor3 = Color3.fromRGB(50,50,50)
            barBG.BorderSizePixel = 0

            local barFG = Instance.new("Frame", barBG)
            barFG.Name = "HP_Fill"
            barFG.Size = UDim2.new(1,0,1,0)
            barFG.Position = UDim2.new(0,0,0,0)
            barFG.BackgroundColor3 = Color3.fromRGB(0,255,0)
            barFG.BorderSizePixel = 0
        end

        local function removeESP(player)
            if player == LocalPlayer then return end
            if not player.Character then return end
            local h = player.Character:FindFirstChild("ESP_Highlight")
            if h then h:Destroy() end
            local head = player.Character:FindFirstChild("Head")
            if head then
                local bill = head:FindFirstChild("ESP_Billboard")
                if bill then bill:Destroy() end
            end
        end

        local function updateESP()
		if not ESP_ENABLED or not LocalPlayer.Character then return end
		local myHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
		if not myHRP then return end

		for _, p in ipairs(Players:GetPlayers()) do
		if p ~= LocalPlayer and p.Character then
		local humanoid = p.Character:FindFirstChildOfClass("Humanoid")
		local hrp = p.Character:FindFirstChild("HumanoidRootPart")
		local head = p.Character:FindFirstChild("Head")
		if humanoid and hrp and head then
		local bill = head:FindFirstChild("ESP_Billboard")
		if bill then
		local info = bill:FindFirstChild("Info")
		local barFG = bill:FindFirstChild("HP_Background") and bill.HP_Background:FindFirstChild("HP_Fill")
		if info then
		local dist = math.floor((myHRP.Position - hrp.Position).Magnitude)
		info.Text = string.format(
		"%s\nHP: %d | %dm",
		p.Name,
		math.floor(humanoid.Health),
		dist
		)
		end
		if barFG then
		local healthRatio = math.clamp(humanoid.Health / humanoid.MaxHealth,0,1)
		if healthRatio > 0.6 then
		barFG.BackgroundColor3 = Color3.fromRGB(0,255,0)
		elseif healthRatio > 0.3 then
		barFG.BackgroundColor3 = Color3.fromRGB(255,255,0)
		else
		barFG.BackgroundColor3 = Color3.fromRGB(255,0,0)
		end
		barFG.Size = UDim2.new(healthRatio,0,1,0)
					end
				end
			end
		end
	end
end

        -- ÊØèÂπÄÊõ¥Êñ∞
        RunService.RenderStepped:Connect(updateESP)

        -- Áé©ÂÆ∂‰∫ã‰ª∂
        local function setupPlayerESP(p)
            if p == LocalPlayer then return end
            p.CharacterAdded:Connect(function()
                task.wait(0.2)
                if ESP_ENABLED then createESP(p) end
            end)
            if ESP_ENABLED and p.Character then
                createESP(p)
            end
        end

        for _, p in ipairs(Players:GetPlayers()) do
            setupPlayerESP(p)
        end

        Players.PlayerAdded:Connect(setupPlayerESP)
        Players.PlayerRemoving:Connect(removeESP)

--================= ÊúçÂãô =================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

--================= ËÆäÊï∏ =================
local NOCLIP_ENABLED = false
local noclipConn = nil

--================= Noclip Ê†∏ÂøÉ =================
local function setNoclipState(state)
    NOCLIP_ENABLED = state

    if state then
        if noclipConn then return end
        noclipConn = RunService.Stepped:Connect(function()
            local char = player.Character
            if not char then return end

            for _, part in ipairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        if noclipConn then
            noclipConn:Disconnect()
            noclipConn = nil
        end

        local char = player.Character
        if char then
            for _, part in ipairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end

-- ================= Water Walk Core =================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer

local waterWalkEnabled = false
local platform
local renderConn

local function getHRP()
    return player.Character and player.Character:FindFirstChild("HumanoidRootPart")
end

local function getWaterY()
    local water = Workspace:FindFirstChild("Water")
    return water and water.Position.Y or 0
end

local function createPlatform()
    if platform then platform:Destroy() end

    local hrp = getHRP()
    if not hrp then return end

    platform = Instance.new("Part")
    platform.Name = "WaterWalkPlatform"
    platform.Size = Vector3.new(50, 1, 50)
    platform.Anchored = true
    platform.CanCollide = true
    platform.Transparency = 1
    platform.Parent = Workspace

    platform.Position = Vector3.new(
        hrp.Position.X,
        getWaterY() - 3,
        hrp.Position.Z
    )
end

local function updatePlatform()
    if not platform then return end
    local hrp = getHRP()
    if not hrp then return end

    local waterY = getWaterY()

    if hrp.Position.Y < waterY then
        platform.CanCollide = false
    else
        platform.CanCollide = true
        platform.Position = Vector3.new(
            hrp.Position.X,
            waterY - 3,
            hrp.Position.Z
        )
    end
end

function setWaterWalkState(state)
    waterWalkEnabled = state

    if state then
        createPlatform()
        renderConn = RunService.RenderStepped:Connect(updatePlatform)
    else
        if renderConn then
            renderConn:Disconnect()
            renderConn = nil
        end
        if platform then
            platform:Destroy()
            platform = nil
        end
    end
end

-- Ê†∏ÂøÉ Hitbox ÈÇèËºØ
local Hitbox = {
    Enabled = false,
    Size = 1,
    Transparency = 0.5,
    Connections = {}
}

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function getRoot(character)
    return character:FindFirstChild("HumanoidRootPart")
end

function Hitbox:ApplyToPlayer(plr)
    if plr == LocalPlayer then return end
    if not plr.Character then return end

    local root = getRoot(plr.Character)
    if root and root:IsA("BasePart") then
        root.CanCollide = false
        root.Size = Vector3.new(self.Size, self.Size, self.Size)
        root.Transparency = self.Transparency
    end
end

function Hitbox:ApplyAll()
    for _, plr in pairs(Players:GetPlayers()) do
        self:ApplyToPlayer(plr)
    end
end

function Hitbox:Start()
    if self.Enabled then return end
    self.Enabled = true

    self:ApplyAll()

    -- Áé©ÂÆ∂ÈáçÁîüÊôÇÈáçÊñ∞Â•óÁî®
    self.Connections.PlayerAdded = Players.PlayerAdded:Connect(function(plr)
        plr.CharacterAdded:Connect(function()
            task.wait(1)
            if self.Enabled then
                self:ApplyToPlayer(plr)
            end
        end)
    end)
end

function Hitbox:Stop()
    self.Enabled = false
end

-- Ëá™ÂãïÂïüÁî® AutoBuso
AutoBuso = true
if AutoBuso then
    pcall(function()
        if Player.Character and not Player.Character:FindFirstChild("HasBuso") then
            CommF:InvokeServer("Buso")
        end
    end)
end

-- Ëá™ÂãïÊ≠¶Ë£ùËâ≤ÈÇèËºØÂæ™Áí∞
task.spawn(function()
    while task.wait(1) do
        if AutoBuso then
            pcall(function()
                if Player.Character and not Player.Character:FindFirstChild("HasBuso") then
                    CommF:InvokeServer("Buso")
                end
            end)
        end
    end
end)

local VirtualInputManager = game:GetService("VirtualInputManager")

local AutoV3 = {
    Enabled = false,
    _task = nil
}

local function StartAutoV3()
    if AutoV3._task then return end

    AutoV3._task = task.spawn(function()
        while AutoV3.Enabled do
            -- Êåâ‰∏ã T
            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.T, false, game)
            task.wait(0.01)
            -- ÊîæÈñã T
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.T, false, game)
            task.wait(0.1)
        end
        AutoV3._task = nil
    end)
end

local function StopAutoV3()
    AutoV3.Enabled = false
end

--// ÁãÄÊÖã
local AutoV4 = false
local autoV4Connection = nil

-- ================= ÂèñÂæó Awakening RemoteFunction =================
local function getAwakeningRemote()
    local backpack = Player:FindFirstChild("Backpack")
    if backpack then
        local awakening = backpack:FindFirstChild("Awakening")
        if awakening then
            return awakening:FindFirstChild("RemoteFunction")
        end
    end
    return nil
end

local Tabs = {
    General  = Window:Tab({ Title = "ÈÄöÁî®",   Icon = "house" }),
    Server   = Window:Tab({ Title = "Server", Icon = "server" }),
    Status   = Window:Tab({ Title = "ÁãÄÊÖã",   Icon = "activity" }),
    PVP      = Window:Tab({ Title = "PVP",    Icon = "swords" }),
    Farm     = Window:Tab({ Title = "Farm",   Icon = "leaf" }),
    Auto     = Window:Tab({ Title = "Ëá™Âãï",   Icon = "cpu" }),
    Settings = Window:Tab({ Title = "Ë®≠ÂÆö",   Icon = "settings" }),
    Teleport = Window:Tab({ Title = "ÂÇ≥ÈÄÅ",   Icon = "map-pin" }),
    Fun      = Window:Tab({ Title = "Â®õÊ®Ç",   Icon = "smile" }),
    Other    = Window:Tab({ Title = "ÂÖ∂‰ªñ",   Icon = "ellipsis" }),
}

Tabs.General:Section({ Title = "ÈÄöÁî®" })

Tabs.General:Toggle({
    Title = "ESP",
    Desc = "È°ØÁ§∫Áé©ÂÆ∂ÂêçÁ®±„ÄÅË°ÄÈáèËàáË∑ùÈõ¢",
    Value = false,
    Callback = function(state)
        ESP_ENABLED = state

        for _, p in ipairs(Players:GetPlayers()) do
            if ESP_ENABLED then
                createESP(p)
            else
                removeESP(p)
            end
        end
    end
})

Tabs.General:Toggle({
    Title = "Noclip",
    Desc = "ËßíËâ≤ÂèØÁ©øÁâÜÁßªÂãï",
    Value = false,
    Callback = function(state)
        setNoclipState(state)
    end
})

-- ================= Wind UI Toggle =================
Tabs.General:Toggle({
    Title = "Ê∞¥‰∏äË°åËµ∞",
    Desc = "ÂèØÂú®Ê∞¥Èù¢‰∏äË°åËµ∞",
    Value = false,
    Callback = function(state)
        setWaterWalkState(state)
    end
})


Tabs.General:Slider({
    Title = "Á¢∞ÊíûÁÆ±",
    Desc = "Ë™øÊï¥Á¢∞ÊíûÁÆ±Â§ßÂ∞è",
    Value = {
        Min = 1,
        Max = 20,
        Default = Hitbox.Size
    },
    Callback = function(value)
        Hitbox.Size = value
        Hitbox:ApplyAll()
    end
})

Tabs.Server:Section({ Title = "Server" })

Tabs.Status:Section({ Title = "ÁãÄÊÖã" })

Tabs.PVP:Section({ Title = "PVP" })

Tabs.Farm:Section({ Title = "Farm Setting" })

Tabs.Auto:Section({ Title = "Ëá™Âãï" })

Tabs.Auto:Toggle({
    Title = "Ëá™ÂãïÊ≠¶Ë£ùËâ≤",
    Desc = "Ëá™ÂãïÈñãÂïüÊàñÈóúÈñâÊ≠¶Ë£ùËâ≤",
    Value = true, -- ÂàùÂßãÁÇ∫ ON
    Callback = function(state)
        AutoBuso = state
        print("AutoBuso ÁãÄÊÖã:", AutoBuso)

        -- ÂàùÂßãÂïüÂãïÊôÇÁ´ãÂç≥ÂëºÂè´‰∏ÄÊ¨°
        if AutoBuso then
            pcall(function()
                if Player.Character and not Player.Character:FindFirstChild("HasBuso") then
                    CommF:InvokeServer("Buso")
                end
            end)
        end
    end
})

Tabs.Auto:Toggle({
    Title = "Ëá™Âãï v3",
    Desc = "Ëá™ÂãïÈñãÂïüÊàñÈóúÈñâv3",
    Value = false, -- ÂàùÂßãÁÇ∫ OFF
    Callback = function(state)
        AutoV3.Enabled = state
        print("Ëá™Âãï v3 ÁãÄÊÖã:", state)

        if state then
            StartAutoV3()
        else
            StopAutoV3()
        end
    end
})

Tabs.Auto:Toggle({
    Title = "Ëá™Âãï V4",
    Desc = "Ëá™ÂãïÈñãÂïüÊàñÈóúÈñâv4",
    Value = false, -- ÂàùÂßãÈóúÈñâ
    Callback = function(state)
        AutoV4 = state
        print("Ëá™Âãï v4 ÁãÄÊÖã:", AutoV4)

        -- ÈóúÈñâÊôÇ‰∏≠Êñ∑ËàäÈÄ£Á∑ö
        if autoV4Connection then
            autoV4Connection:Disconnect()
            autoV4Connection = nil
        end

        -- ÈñãÂïüËá™Âãï V4
        if AutoV4 then
            -- Á´ãÂç≥ÂëºÂè´‰∏ÄÊ¨°
            pcall(function()
                local remote = getAwakeningRemote()
                if remote then
                    remote:InvokeServer(true)
                end
            end)

            -- Heartbeat ÊåÅÁ∫åÂëºÂè´
            autoV4Connection = RunService.Heartbeat:Connect(function()
                local remote = getAwakeningRemote()
                if remote then
                    pcall(function()
                        remote:InvokeServer(true)
                    end)
                end
            end)
        end
    end
})

Tabs.Settings:Section({ Title = "Ë®≠ÂÆö" })

Tabs.Teleport:Section({ Title = "ÂÇ≥ÈÄÅ" })

Tabs.Fun:Section({ Title = "Â®õÊ®Ç" })

Tabs.Other:Section({ Title = "ÂÖ∂‰ªñ" })
