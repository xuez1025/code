-- ===== 基本服務 =====
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- ===== 全域狀態表=====
_G.FastAttack = true
local Settings = {
    AutoClick = true,
    Distance = 50,
    AttackInterval = 0.01,
    MaxTargets = 20,
    ESP_ENABLED = false,
    
}

local function IsAlive(char)
    local hum = char:FindFirstChild("Humanoid")
    return hum and hum.Health > 0
end
-- ===== FastAttack 核心 =====
local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local RegisterAttack = Net:WaitForChild("RE/RegisterAttack")
local RegisterHit = Net:WaitForChild("RE/RegisterHit")
local EnemiesFolder = workspace:WaitForChild("Enemies")
local CharactersFolder = workspace:WaitForChild("Characters")

-- ===== ESP 核心 =====
local function getESPColor(player)
    local myTeam = player.Team
    local playerTeam = player.Team

    if myTeam and playerTeam then
        if myTeam == playerTeam then
            return Color3.fromRGB(0,255,0)
        else
            return Color3.fromRGB(255,0,0)
        end
    end
    return Color3.fromRGB(255,255,255)
end

local function createESP(player)
    if not player.Character then return end
    if player.Character:FindFirstChild("ESP_Highlight") then return end

    local color = getESPColor(player)

    local h = Instance.new("Highlight")
    h.Name = "ESP_Highlight"
    h.FillColor = color
    h.OutlineColor = Color3.fromRGB(255,255,255)
    h.FillTransparency = 0.2
    h.OutlineTransparency = 0
    h.Adornee = player.Character
    h.Parent = player.Character

    local head = player.Character:FindFirstChild("Head")
    if not head then return end

    local bill = Instance.new("BillboardGui")
    bill.Name = "ESP_Billboard"
    bill.Size = UDim2.fromOffset(180,50)
    bill.StudsOffset = Vector3.new(0,3,0)
    bill.AlwaysOnTop = true
    bill.Parent = head

    local text = Instance.new("TextLabel", bill)
    text.Size = UDim2.fromOffset(180,50)
    text.Position = UDim2.fromOffset(0,0)
    text.BackgroundTransparency = 1
    text.TextColor3 = color
    text.TextStrokeTransparency = 0
    text.TextTransparency = 0.2
    text.Font = Enum.Font.SourceSansBold
    text.TextSize = 20
    text.Name = "Info"
end

local function removeESP(player)
    if not player.Character then return end
    local h = player.Character:FindFirstChild("ESP_Highlight")
    if h then h:Destroy() end
    local head = player.Character:FindFirstChild("Head")
    if head then
        local bill = head:FindFirstChild("ESP_Billboard")
        if bill then bill:Destroy() end
    end
end

local function refreshESP()
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= player then
            if ESP_ENABLED then
                createESP(p)
            else
                removeESP(p)
            end
        end
    end
end

-- ===== Xu-hub UI =====
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = PlayerGui
screenGui.Name = "XuHubGui"

-- 小長方形開關
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0,120,0,50)
toggleBtn.Position = UDim2.new(0.5,-60,0,0)
toggleBtn.Text = "Xu-hub"
toggleBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
toggleBtn.TextColor3 = Color3.fromRGB(255,255,255)
toggleBtn.BorderSizePixel = 0
toggleBtn.TextScaled = true
toggleBtn.Parent = screenGui
local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0,10)
toggleCorner.Parent = toggleBtn

-- 主框架
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0,900,0,650)
mainFrame.Position = UDim2.new(0.5,-450,0.5,-325)
mainFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
mainFrame.BackgroundTransparency = 0.3
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.Parent = screenGui
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0,10)
UICorner.Parent = mainFrame

-- 標題列
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1,0,0,50)
titleBar.BackgroundColor3 = Color3.fromRGB(20,20,20)
titleBar.BackgroundTransparency = 0.3
titleBar.Parent = mainFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1,-20,1,0)
titleLabel.Position = UDim2.new(0,10,0,0)
titleLabel.Text = "Xu-hub"
titleLabel.TextColor3 = Color3.fromRGB(255,255,255)
titleLabel.BackgroundTransparency = 1
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextSize = 32
titleLabel.Parent = titleBar

-- 關閉按鈕
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,30,0,30)
closeBtn.Position = UDim2.new(1,-40,0,10)
closeBtn.Text = "X"
closeBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)
closeBtn.BackgroundTransparency = 0.2
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.Parent = titleBar
closeBtn.MouseButton1Click:Connect(function()
    mainFrame:Destroy()
    toggleBtn:Destroy()
end)

-- 縮小化按鈕 (-)
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0,30,0,30)
minimizeBtn.Position = UDim2.new(1,-80,0,10)
minimizeBtn.Text = "-"
minimizeBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)
minimizeBtn.BackgroundTransparency = 0.2
minimizeBtn.TextColor3 = Color3.fromRGB(255,255,255)
minimizeBtn.Parent = titleBar

local isMinimized = false
local originalSize = mainFrame.Size
local originalPosition = mainFrame.Position

-- 左側側欄
local sideBar = Instance.new("ScrollingFrame")
sideBar.Size = UDim2.new(0,180,1,-50)
sideBar.Position = UDim2.new(0,0,0,50)
sideBar.BackgroundColor3 = Color3.fromRGB(50,50,50)
sideBar.BackgroundTransparency = 0.4
sideBar.BorderSizePixel = 0
sideBar.ScrollBarThickness = 6
sideBar.Parent = mainFrame
local sideUICorner = Instance.new("UICorner")
sideUICorner.CornerRadius = UDim.new(0,10)
sideUICorner.Parent = sideBar

-- 右側內容區
local contentFrame = Instance.new("ScrollingFrame")
contentFrame.Size = UDim2.new(1,-180,1,-50)
contentFrame.Position = UDim2.new(0,180,0,50)
contentFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
contentFrame.BackgroundTransparency = 0.8
contentFrame.BorderSizePixel = 0
contentFrame.ScrollBarThickness = 6
contentFrame.Parent = mainFrame
local contentCorner = Instance.new("UICorner")
contentCorner.CornerRadius = UDim.new(0,10)
contentCorner.Parent = contentFrame

-- 縮小功能
minimizeBtn.MouseButton1Click:Connect(function()
    if not isMinimized then
        mainFrame.Size = UDim2.new(0, originalSize.X.Offset, 0, titleBar.Size.Y.Offset)
        isMinimized = true
        contentFrame.Visible = false
        sideBar.Visible = false
    else
        mainFrame.Size = originalSize
        mainFrame.Position = originalPosition
        isMinimized = false
        contentFrame.Visible = true
        sideBar.Visible = true
    end
end)

-- ===== 側欄按鈕 =====
local buttonNames = {
    "通用", "設定", "Server", "Status", "PVP", 
    "Farm", "自動", "未解鎖", "未解鎖", "未解鎖"
}

local buttons = {}
for i=1,10 do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-20,0,50)
    btn.Position = UDim2.new(0,10,0,10 + (i-1)*60)
    btn.Text = buttonNames[i]
    btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.BorderSizePixel = 0
    btn.TextScaled = true
    btn.Font = Enum.Font.SourceSansBold
    btn.Parent = sideBar

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0,10)
    btnCorner.Parent = btn

    local indicator = Instance.new("Frame")
    indicator.Size = UDim2.new(0,4,1,0)
    indicator.Position = UDim2.new(0,0,0,0)
    indicator.BackgroundColor3 = Color3.fromRGB(0,120,255)
    indicator.Visible = false
    indicator.Parent = btn

    buttons[i] = {Button = btn, Indicator = indicator}
end

-- ===== 右側內容生成函數 =====
local function createOptionRow(parent, yPos, labelText, contentFunc)
    local rowFrame = Instance.new("Frame")
    rowFrame.Size = UDim2.new(1,-20,0,50)
    rowFrame.Position = UDim2.new(0,10,0,yPos)
    rowFrame.BackgroundColor3 = Color3.fromRGB(50,50,50)
    rowFrame.BorderSizePixel = 0
    rowFrame.Parent = parent

    local rowCorner = Instance.new("UICorner")
    rowCorner.CornerRadius = UDim.new(0,10)
    rowCorner.Parent = rowFrame

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0,120,1,0)
    label.Position = UDim2.new(0,10,0,0)
    label.BackgroundTransparency = 1
    label.Text = labelText
    label.TextColor3 = Color3.fromRGB(255,255,255)
    label.TextScaled = true
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = rowFrame

    contentFunc(rowFrame)
    return rowFrame
end

-- ===== 右側內容 =====
local function showContent(index)
    contentFrame:ClearAllChildren()
    for i,b in ipairs(buttons) do
        b.Indicator.Visible = (i==index)
    end
    
    if index == 1 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 40)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "ESP"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame

        -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)
	y = y + 40 -- 下一個選項的 y 位置

    elseif index == 2 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 40)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "設定"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame
    
        -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

    elseif index == 3 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 40)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "Server"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame

    -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

    elseif index == 4 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 40)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "狀態"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame
    
    -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

    elseif index == 5 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 40)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "PVP"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame

    -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

        -- 自動攻擊開關
        createOptionRow(contentFrame, y, "自動攻擊", function(row)
            local switchBg = Instance.new("Frame")
            switchBg.Size = UDim2.new(0,60,0.5,0)
            switchBg.Position = UDim2.new(1,-70,0.25,0)
            switchBg.BackgroundColor3 = Settings.AutoClick and Color3.fromRGB(0,200,0) or Color3.fromRGB(100,100,100)
            switchBg.BorderSizePixel = 0
            switchBg.Parent = row
            local switchCorner = Instance.new("UICorner")
            switchCorner.CornerRadius = UDim.new(0,20)
            switchCorner.Parent = switchBg

            local knob = Instance.new("Frame")
            knob.Size = UDim2.new(0,28,1,0)
            knob.Position = Settings.AutoClick and UDim2.new(1, -28, 0, 0) or UDim2.new(0,0,0,0)
            knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
            knob.BorderSizePixel = 0
            knob.Parent = switchBg
            local knobCorner = Instance.new("UICorner")
            knobCorner.CornerRadius = UDim.new(0,20)
            knobCorner.Parent = knob

            local toggled = Settings.AutoClick
            local function toggleSwitch()
                toggled = not toggled
                Settings.AutoClick = toggled
                if toggled then
                    knob:TweenPosition(UDim2.new(1,-28,0,0),"Out","Quad",0.2,true)
                    switchBg.BackgroundColor3 = Color3.fromRGB(0,200,0)
                else
                    knob:TweenPosition(UDim2.new(0,0,0,0),"Out","Quad",0.2,true)
                    switchBg.BackgroundColor3 = Color3.fromRGB(100,100,100)
                end
            end
            switchBg.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then toggleSwitch() end
            end)
        end)
        y = y + 60

        -- 攻擊距離滑條
        createOptionRow(contentFrame, y, "攻擊距離:", function(row)
            local inputBox = Instance.new("TextBox")
            inputBox.Size = UDim2.new(0,80,0.6,0)
            inputBox.Position = UDim2.new(0,130,0.2,0)
            inputBox.BackgroundColor3 = Color3.fromRGB(70,70,70)
            inputBox.TextColor3 = Color3.fromRGB(255,255,255)
            inputBox.TextScaled = true
            inputBox.ClearTextOnFocus = false
            inputBox.Text = tostring(Settings.Distance)
            inputBox.Parent = row

            local slider = Instance.new("Frame")
            slider.Size = UDim2.new(0,200,0.3,0)
            slider.Position = UDim2.new(0,220,0.35,0)
            slider.BackgroundColor3 = Color3.fromRGB(100,100,100)
            slider.Parent = row
            local fill = Instance.new("Frame")
            fill.Size = UDim2.new(Settings.Distance/1000,0,1,0)
            fill.BackgroundColor3 = Color3.fromRGB(255,200,0)
            fill.Parent = slider

            local maxLabel = Instance.new("TextLabel")
            maxLabel.Size = UDim2.new(0,80,1,0)
            maxLabel.Position = UDim2.new(0,430,0,0)
            maxLabel.BackgroundTransparency = 1
            maxLabel.Text = "(max:1000m)"
            maxLabel.TextColor3 = Color3.fromRGB(200,200,200)
            maxLabel.TextScaled = true
            maxLabel.TextXAlignment = Enum.TextXAlignment.Left
            maxLabel.Parent = row

            local dragging = false
            local MAX_DISTANCE = 1000

            slider.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
            end)
            slider.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
            end)
            slider.InputChanged:Connect(function(input)
                if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                    local mouseX = input.Position.X - slider.AbsolutePosition.X
                    mouseX = math.clamp(mouseX,0,slider.AbsoluteSize.X)
                    local distance = (mouseX/slider.AbsoluteSize.X)*MAX_DISTANCE
                    Settings.Distance = distance
                    inputBox.Text = tostring(math.floor(distance))
                    fill.Size = UDim2.new(mouseX/slider.AbsoluteSize.X,0,1,0)
                end
            end)
            inputBox.FocusLost:Connect(function(enterPressed)
                if enterPressed then
                    local val = tonumber(inputBox.Text)
                    if val then
                        local distance = math.clamp(val,0,MAX_DISTANCE)
                        Settings.Distance = distance
                        inputBox.Text = tostring(math.floor(distance))
                        fill.Size = UDim2.new(distance/MAX_DISTANCE,0,1,0)
                    else
                        inputBox.Text = tostring(math.floor(Settings.Distance))
                    end
                end
            end)
        end)
        y = y + 60

    elseif index == 6 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 40)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "Farm"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame

    -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

    elseif index == 7 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 40)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "自動"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame

    -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

    elseif index == 8 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 100)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "未解鎖"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame

    -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

    elseif index == 9 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 100)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "未解鎖"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame

    -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

    elseif index == 10 then
        local y = 10

		    -- ===== 大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1, -20, 0, 100)
    mainTitle.Position = UDim2.new(0, 10, 0, y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "未解鎖"
    mainTitle.TextColor3 = Color3.fromRGB(50, 50, 50)
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextScaled = true
    mainTitle.TextXAlignment = Enum.TextXAlignment.Left
    mainTitle.Parent = contentFrame
    
        -- 彩虹顏色效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1 -- 速度可調整，越小越慢
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

	y = y + 40 -- 下一個選項的 y 位置

    end
end

-- ===== 點擊側欄按鈕顯示內容（內容區完全空白） =====
for i,b in ipairs(buttons) do
    b.Button.MouseButton1Click:Connect(function()
        showContent(i)
    end)
end

-- 顯示 / 隱藏主框架
toggleBtn.MouseButton1Click:Connect(function()
    mainFrame.Visible = not mainFrame.Visible
end)

-- ===== 可拖動功能 =====
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(
        startPos.X.Scale,
        startPos.X.Offset + delta.X,
        startPos.Y.Scale,
        startPos.Y.Offset + delta.Y
    )
end

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

titleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- ===== FastAttack 核心執行 =====
task.spawn(function()
    while _G.FastAttack do
        if Settings.AutoClick then
            local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if root then
                local targets = {}
                for _, folder in ipairs({EnemiesFolder, CharactersFolder}) do
                    for _, obj in ipairs(folder:GetChildren()) do
                        if obj ~= player.Character then
                            local head = obj:FindFirstChild("Head")
                            if head and IsAlive(obj) then
                                local dist = (head.Position - root.Position).Magnitude
                                if dist <= Settings.Distance then
                                    table.insert(targets,{obj,head})
                                    if #targets >= Settings.MaxTargets then break end
                                end
                            end
                        end
                        if #targets >= Settings.MaxTargets then break end
                    end
                    if #targets >= Settings.MaxTargets then break end
                end

                local aliveTargets = {}
                for _, t in ipairs(targets) do
                    if IsAlive(t[1]) then
                        table.insert(aliveTargets, t)
                    end
                end

                if #aliveTargets > 0 then
                    RegisterAttack:FireServer(0)
                    RegisterHit:FireServer(aliveTargets[1][2], aliveTargets)
                end
            end
        end
        task.wait(Settings.AttackInterval)
    end
end)
