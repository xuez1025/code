        -- ===== 基本服務 =====
        local Players = game:GetService("Players")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local TweenService = game:GetService("TweenService")
        local UserInputService = game:GetService("UserInputService")
        local RunService = game:GetService("RunService")
        local Workspace = game:GetService("Workspace")

        local player = Players.LocalPlayer
        local PlayerGui = player:WaitForChild("PlayerGui")

-- ===== 目標座標 =====
local TARGET_CFRAME = CFrame.new(-285,309, 595)

        -- ===== 核心 =====
        _G.FastAttack = true
        local Settings = {
            AutoClick = true,
            Distance = 50,
            AttackInterval = 0.01,
            MaxTargets = 20,
            
        }

        local function IsAlive(char)
            local hum = char:FindFirstChild("Humanoid")
            return hum and hum.Health > 0
        end
        -- ===== FastAttack 核心 =====
        local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
        local RegisterAttack = Net:WaitForChild("RE/RegisterAttack")
        local RegisterHit = Net:WaitForChild("RE/RegisterHit")
        local EnemiesFolder = workspace:WaitForChild("Enemies")
        local CharactersFolder = workspace:WaitForChild("Characters")

-- ================= 核心參數 =================
local SLIDE_MAGNITUDE = 350  -- 初始速度
local ACCELERATION = 12      -- 加速
local DECELERATION = 18      -- 減速
local MAX_SPEED = 1000       -- 速度上限

local moving = false
local moveConn
local moveKeys = {W=false, A=false, S=false, D=false}
local currentVelocity = Vector3.zero

local player = Players.LocalPlayer
local character, root, humanoid

-- ================= 核心函數 =================
local function setupCharacter(char)
    character = char
    root = char:WaitForChild("HumanoidRootPart")
    humanoid = char:WaitForChild("Humanoid")
end
setupCharacter(player.Character or player.CharacterAdded:Wait())
player.CharacterAdded:Connect(setupCharacter)

-- WASD
UserInputService.InputBegan:Connect(function(input,gpe)
    if gpe then return end
    if input.KeyCode==Enum.KeyCode.W then moveKeys.W=true end
    if input.KeyCode==Enum.KeyCode.A then moveKeys.A=true end
    if input.KeyCode==Enum.KeyCode.S then moveKeys.S=true end
    if input.KeyCode==Enum.KeyCode.D then moveKeys.D=true end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.KeyCode==Enum.KeyCode.W then moveKeys.W=false end
    if input.KeyCode==Enum.KeyCode.A then moveKeys.A=false end
    if input.KeyCode==Enum.KeyCode.S then moveKeys.S=false end
    if input.KeyCode==Enum.KeyCode.D then moveKeys.D=false end
end)

-- ================= 移動核心 =================
local function startMove()
    if moving or not root then return end
    moving = true

    moveConn = RunService.RenderStepped:Connect(function(dt)
        if not root then return end

        local cam = Workspace.CurrentCamera
        local look = Vector3.new(cam.CFrame.LookVector.X,0,cam.CFrame.LookVector.Z)
        local right = Vector3.new(cam.CFrame.RightVector.X,0,cam.CFrame.RightVector.Z)

        local dir = Vector3.zero
        if moveKeys.W then dir += look end
        if moveKeys.S then dir -= look end
        if moveKeys.A then dir -= right end
        if moveKeys.D then dir += right end
        if dir.Magnitude > 0 then dir = dir.Unit end

        -- 目標速度
        local targetVelocity = dir * SLIDE_MAGNITUDE

        -- 平滑速度
        local lerpSpeed = dir.Magnitude > 0 and ACCELERATION or DECELERATION
        currentVelocity = currentVelocity:Lerp(targetVelocity, math.clamp(lerpSpeed*dt,0,1))

        -- 只水平移動（無跳躍）
        root.CFrame += Vector3.new(currentVelocity.X, 0, currentVelocity.Z) * dt
    end)
end

local function stopMove()
    moving = false
    if moveConn then
        moveConn:Disconnect()
        moveConn = nil
    end
end

local function toggleMove(state)
    if state then
        startMove()
    else
        stopMove()
    end
end

        -- ===== Farm TP 核心狀態 =====
        local FarmTP = {
            Enabled = false,
            HoverHeight = 10,
            Range = 500,
            BaseSpeed = 0.1
        }

        local farmConn

        local function stopFarmTP()
            FarmTP.Enabled = false
            if farmConn then
                farmConn:Disconnect()
                farmConn = nil
            end
        end

        local function startFarmTP()
            if farmConn then return end

            farmConn = RunService.Heartbeat:Connect(function()
                if not FarmTP.Enabled then return end

                local char = player.Character
                local hrp = char and char:FindFirstChild("HumanoidRootPart")
                if not hrp then return end

                local enemiesFolder = workspace:FindFirstChild("Enemies")
                if not enemiesFolder then return end

                local nearest, minDist = nil, math.huge

                for _, npc in ipairs(enemiesFolder:GetChildren()) do
                    local hum = npc:FindFirstChild("Humanoid")
                    local hrpNpc = npc:FindFirstChild("HumanoidRootPart") or npc:FindFirstChild("Head")
                    if hum and hum.Health > 0 and hrpNpc then
                        local dist = (hrpNpc.Position - hrp.Position).Magnitude
                        if dist < minDist and dist <= FarmTP.Range then
                            minDist = dist
                            nearest = hrpNpc
                        end
                    end
                end

                if nearest then
                    local targetPos = nearest.Position + Vector3.new(0, FarmTP.HoverHeight, 0)
                    local speed = FarmTP.BaseSpeed
                    if minDist < FarmTP.Range / 2 then
                        speed = speed * 5
                    end
                    hrp.CFrame = CFrame.new(hrp.Position:Lerp(targetPos, speed))
                end
            end)
        end

        -- ================= 核心 ESP 功能 =================
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local LocalPlayer = Players.LocalPlayer

        ESP_ENABLED = false
        local ESP_COLOR = Color3.fromRGB(30,30,30)
        local TEXT_COLOR = Color3.fromRGB(255,255,255)

        local function createESP(player)
            if player == LocalPlayer then return end
            if not player.Character then return end
            if player.Character:FindFirstChild("ESP_Highlight") then return end

            local h = Instance.new("Highlight")
            h.Name = "ESP_Highlight"
            h.FillColor = ESP_COLOR
            h.OutlineColor = Color3.fromRGB(255,255,255)
            h.FillTransparency = 0.2
            h.OutlineTransparency = 0
            h.Adornee = player.Character
            h.Parent = player.Character

            local head = player.Character:FindFirstChild("Head")
            if not head then return end

            local bill = Instance.new("BillboardGui")
            bill.Name = "ESP_Billboard"
			bill.Size = UDim2.fromOffset(140,48)
			bill.StudsOffset = Vector3.new(0,2.6,0)
            bill.AlwaysOnTop = true
            bill.Parent = head

            local text = Instance.new("TextLabel", bill)
            text.Name = "Info"
            text.Position = UDim2.new(0,0,0,0)
            text.BackgroundTransparency = 1
            text.TextColor3 = TEXT_COLOR
            text.TextStrokeTransparency = 0
            text.Font = Enum.Font.SourceSansBold
            text.TextYAlignment = Enum.TextYAlignment.Top
            text.Text = player.Name
			text.Size = UDim2.new(1, -8, 0.65, 0)
			text.Position = UDim2.new(0,4,0,2)
			text.TextScaled = true
			text.TextWrapped = true
			text.TextSize = 18
			text.TextXAlignment = Enum.TextXAlignment.Center

            local barBG = Instance.new("Frame", bill)
            barBG.Name = "HP_Background"
			barBG.Size = UDim2.new(0.9,0,0.12,0)
			barBG.Position = UDim2.new(0.05,0,0.78,0)
            barBG.BackgroundColor3 = Color3.fromRGB(50,50,50)
            barBG.BorderSizePixel = 0

            local barFG = Instance.new("Frame", barBG)
            barFG.Name = "HP_Fill"
            barFG.Size = UDim2.new(1,0,1,0)
            barFG.Position = UDim2.new(0,0,0,0)
            barFG.BackgroundColor3 = Color3.fromRGB(0,255,0)
            barFG.BorderSizePixel = 0
        end

        local function removeESP(player)
            if player == LocalPlayer then return end
            if not player.Character then return end
            local h = player.Character:FindFirstChild("ESP_Highlight")
            if h then h:Destroy() end
            local head = player.Character:FindFirstChild("Head")
            if head then
                local bill = head:FindFirstChild("ESP_Billboard")
                if bill then bill:Destroy() end
            end
        end

        local function updateESP()
            if not ESP_ENABLED or not LocalPlayer.Character then return end
            local myHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if not myHRP then return end

            for _, p in ipairs(Players:GetPlayers()) do
                if p ~= LocalPlayer and p.Character then
                    local humanoid = p.Character:FindFirstChildOfClass("Humanoid")
                    local hrp = p.Character:FindFirstChild("HumanoidRootPart")
                    local head = p.Character:FindFirstChild("Head")
                    if humanoid and hrp and head then
                        local bill = head:FindFirstChild("ESP_Billboard")
                        if bill then
                            local info = bill:FindFirstChild("Info")
                            local barFG = bill:FindFirstChild("HP_Background") and bill.HP_Background:FindFirstChild("HP_Fill")
                            if info then
                                local dist = math.floor((myHRP.Position - hrp.Position).Magnitude)
									info.Text = string.format(
										"%s\nHP: %d | %dm",
										p.Name,
										math.floor(humanoid.Health),
										dist
									)
                            end
                            if barFG then
                                local healthRatio = math.clamp(humanoid.Health / humanoid.MaxHealth,0,1)
                                if healthRatio > 0.6 then
                                    barFG.BackgroundColor3 = Color3.fromRGB(0,255,0)
                                elseif healthRatio > 0.3 then
                                    barFG.BackgroundColor3 = Color3.fromRGB(255,255,0)
                                else
                                    barFG.BackgroundColor3 = Color3.fromRGB(255,0,0)
                                end
                                barFG.Size = UDim2.new(healthRatio,0,1,0)
                            end
                        end
                    end
                end
            end
        end

        -- 每幀更新
        RunService.RenderStepped:Connect(updateESP)

        -- 玩家事件
        local function setupPlayerESP(p)
            if p == LocalPlayer then return end
            p.CharacterAdded:Connect(function()
                task.wait(0.2)
                if ESP_ENABLED then createESP(p) end
            end)
            if ESP_ENABLED and p.Character then
                createESP(p)
            end
        end

        for _, p in ipairs(Players:GetPlayers()) do
            setupPlayerESP(p)
        end

        Players.PlayerAdded:Connect(setupPlayerESP)
        Players.PlayerRemoving:Connect(removeESP)

        -- ================= Noclip 核心 =================
        local NOCLIP_ENABLED = false
        local noclipConn

        local function setNoclipState(state)
            NOCLIP_ENABLED = state

            if state then
                if noclipConn then return end
                noclipConn = RunService.Stepped:Connect(function()
                    local char = player.Character
                    if not char then return end
                    for _, part in ipairs(char:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end)
            else
                if noclipConn then
                    noclipConn:Disconnect()
                    noclipConn = nil
                end
                
                local char = player.Character
                if char then
                    for _, part in ipairs(char:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = true
                        end
                    end
                end
            end
        end

        -- ================= Low Graphics / AntiLag =================
        local LOWGRAPHICS_ENABLED = false
        local Terrain = workspace:FindFirstChildWhichIsA("Terrain")
        local Lighting = game:GetService("Lighting")

        local function ApplyLowGraphics(state)
            LOWGRAPHICS_ENABLED = state

            if state then
                Terrain.WaterWaveSize = 0
                Terrain.WaterWaveSpeed = 0
                Terrain.WaterReflectance = 0
                Terrain.WaterTransparency = 1
                
                Lighting.GlobalShadows = false
                Lighting.FogEnd = 9e9
                Lighting.FogStart = 9e9

                settings().Rendering.QualityLevel = 1

                for _, v in pairs(game:GetDescendants()) do
                    if v:IsA("BasePart") then
                        v.CastShadow = false
                        v.Material = Enum.Material.Plastic
                        v.Reflectance = 0
                    elseif v:IsA("Decal") then
                        v.Transparency = 1
                        v.Texture = ""
                    elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                        v.Lifetime = NumberRange.new(0)
                    end
                end
                
                for _, v in pairs(Lighting:GetDescendants()) do
                    if v:IsA("PostEffect") then
                        v.Enabled = false
                    end
                end
                
                workspace.DescendantAdded:Connect(function(child)
                    task.spawn(function()
                        if child:IsA("ForceField") 
                        or child:IsA("Sparkles") 
                        or child:IsA("Smoke") 
                        or child:IsA("Fire") 
                        or child:IsA("Beam") then
                            RunService.Heartbeat:Wait()
                            child:Destroy()
                        elseif child:IsA("BasePart") then
                            child.CastShadow = false
                        end
                    end)
                end)

            else
                -- 可選：取消低配效果 (如不需要可留空)
                Lighting.GlobalShadows = true
            end
        end

-- ================= Anti AFK Core =================
local AntiAFK_ENABLED = false
local AntiAFK_Connection

local function enableAntiAFK()
    if AntiAFK_ENABLED then return end
    AntiAFK_ENABLED = true

    if getconnections then
        for _, connection in pairs(getconnections(Players.LocalPlayer.Idled)) do
            if connection.Disable then
                connection:Disable()
            elseif connection.Disconnect then
                connection:Disconnect()
            end
        end
    else
        AntiAFK_Connection = Players.LocalPlayer.Idled:Connect(function()
            Services.VirtualUser:CaptureController()
            Services.VirtualUser:ClickButton2(Vector2.new())
        end)
    end
end

local function disableAntiAFK()
    if not AntiAFK_ENABLED then return end
    AntiAFK_ENABLED = false

    if AntiAFK_Connection then
        AntiAFK_Connection:Disconnect()
        AntiAFK_Connection = nil
    end
end

        -- ===== v3核心 =====

local Scripts = {}

Scripts["自動v3"] = {
    Enabled = false,
    _conn = nil,

    Func = function(self)
        local VirtualInputManager = game:GetService("VirtualInputManager")
        if self._conn then return end
        self._conn = task.spawn(function()
            while self.Enabled do
                -- 按下 T
                VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.T, false, game)
                task.wait(0.01)
                -- 放開 T
                VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.T, false, game)
                task.wait(0.1)
            end
        end)
    end,

    StopFunc = function(self)
        self.Enabled = false
        self._conn = nil
    end
}

-- ===== v4核心 =====

local Scripts = Scripts or {}

Scripts["自動v4"] = {
    Enabled = false,
    _conn = nil,

    Func = function(self)
        local VirtualInputManager = game:GetService("VirtualInputManager")
        if self._conn then return end
        self._conn = task.spawn(function()
            while self.Enabled do
                -- 按下 Y
                VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Y, false, game)
                task.wait(0.01)
                -- 放開 Y
                VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Y, false, game)
                task.wait(0.1)
            end
        end)
    end,

    StopFunc = function(self)
        self.Enabled = false
        self._conn = nil
    end
}
-- ================= 核心邏輯 =================
local JumpSettings = {
    Enabled = false,
    JumpPower = 100, -- 初始跳躍高度
    MaxJumpPower = 500
}

local function updateJumpPower(player)
    local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        if humanoid.UseJumpPower then
            humanoid.JumpPower = JumpSettings.Enabled and JumpSettings.JumpPower or 50
        else
            humanoid.JumpHeight = JumpSettings.Enabled and JumpSettings.JumpPower or 7.2 -- 默認高度
        end
    end
end

-- 監聽角色刷新
game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function()
        updateJumpPower(player)
    end)
end)

local FlyEnabled = false
local TargetPlayer = nil
local NoclipEnabled = false
local FlyBV, FlyBG

-- ================== Fly 功能 ==================
local function EnableFly()
    local char = LocalPlayer.Character
    if not char or FlyBV then return end

    local hrp = char:WaitForChild("HumanoidRootPart")
    local hum = char:FindFirstChildOfClass("Humanoid")

    -- BodyVelocity 控制速度
    FlyBV = Instance.new("BodyVelocity")
    FlyBV.MaxForce = Vector3.new(1e9,1e9,1e9)
    FlyBV.Velocity = Vector3.zero
    FlyBV.Parent = hrp

    -- BodyGyro 控制方向
    FlyBG = Instance.new("BodyGyro")
    FlyBG.MaxTorque = Vector3.new(1e9,1e9,1e9)
    FlyBG.P = 50000
    FlyBG.CFrame = hrp.CFrame
    FlyBG.Parent = hrp

    -- Humanoid 改成 Physics 狀態
    if hum then
        hum:ChangeState(Enum.HumanoidStateType.Physics)
    end
end

local function DisableFly()
    if FlyBV then FlyBV:Destroy() FlyBV = nil end
    if FlyBG then FlyBG:Destroy() FlyBG = nil end

    local char = LocalPlayer.Character
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    if hum then
        hum:ChangeState(Enum.HumanoidStateType.GettingUp)
    end
end

-- ================== Noclip ==================
RunService.Stepped:Connect(function()
    if NoclipEnabled then
        local char = LocalPlayer.Character
        if char then
            for _,p in ipairs(char:GetDescendants()) do
                if p:IsA("BasePart") then
                    p.CanCollide = false
                end
            end
        end
    end
end)

-- ================== Fly 控制 ==================
RunService.RenderStepped:Connect(function()
    if FlyEnabled then
        local char = LocalPlayer.Character
        local hrp = char and char:FindFirstChild("HumanoidRootPart")
        if hrp and FlyBV and FlyBG then
            local velocity = Vector3.zero

            -- 鍵盤控制（WASD 上下飛行）
            local keys = {W=false, A=false, S=false, D=false, Space=false, LeftShift=false}
            local UIS = game:GetService("UserInputService")
            for k,v in pairs(keys) do
                keys[k] = UIS:IsKeyDown(Enum.KeyCode[k])
            end

            local cam = workspace.CurrentCamera
            if cam then
                local forward = cam.CFrame.LookVector
                local right = cam.CFrame.RightVector

                if keys.W then velocity += forward end
                if keys.S then velocity -= forward end
                if keys.D then velocity += right end
                if keys.A then velocity -= right end
                if keys.Space then velocity += Vector3.new(0,1,0) end
                if keys.LeftShift then velocity -= Vector3.new(0,1,0) end
            end

            velocity = velocity.Unit * (velocity.Magnitude > 0 and 200 or 0) -- 最大速度
            FlyBV.Velocity = velocity
            FlyBG.CFrame = CFrame.new(hrp.Position, hrp.Position + (velocity.Magnitude > 0 and velocity or hrp.CFrame.LookVector))
        end

        -- 如果有指定目標玩家，自動跟隨
        if TargetPlayer and TargetPlayer.Character then
            local targetHrp = TargetPlayer.Character:FindFirstChild("HumanoidRootPart")
            if targetHrp and FlyBV then
                local direction = targetHrp.Position - hrp.Position
                FlyBV.Velocity = direction.Unit * math.clamp(direction.Magnitude*10, 50, 300) + Vector3.new(0,5,0)
                FlyBG.CFrame = CFrame.new(hrp.Position, targetHrp.Position)
            end
        end
    end
end)

        -- ===== Xu-hub UI =====
        local screenGui = Instance.new("ScreenGui")
        screenGui.Parent = PlayerGui
        screenGui.Name = "XuHubGui"

        -- 小長方形開關
        local toggleBtn = Instance.new("TextButton")
        toggleBtn.Size = UDim2.new(0,120,0,50)
        toggleBtn.Position = UDim2.new(0.5,-60,0,0)
        toggleBtn.Text = "Xu-hub"
        toggleBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
        toggleBtn.TextColor3 = Color3.fromRGB(255,255,255)
        toggleBtn.BorderSizePixel = 0
        toggleBtn.TextScaled = true
        toggleBtn.Parent = screenGui
        local toggleCorner = Instance.new("UICorner")
        toggleCorner.CornerRadius = UDim.new(0,10)
        toggleCorner.Parent = toggleBtn

        -- 主框架
        local mainFrame = Instance.new("Frame")
        mainFrame.Size = UDim2.new(0,900,0,650)
        mainFrame.Position = UDim2.new(0.5,-450,0.5,-325)
        mainFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
        mainFrame.BackgroundTransparency = 0.3
        mainFrame.BorderSizePixel = 0
        mainFrame.Visible = false
        mainFrame.Parent = screenGui
        local UICorner = Instance.new("UICorner")
        UICorner.CornerRadius = UDim.new(0,10)
        UICorner.Parent = mainFrame

        -- 標題列
        local titleBar = Instance.new("Frame")
        titleBar.Size = UDim2.new(1,0,0,50)
        titleBar.BackgroundColor3 = Color3.fromRGB(20,20,20)
        titleBar.BackgroundTransparency = 0.3
        titleBar.Parent = mainFrame

        local titleLabel = Instance.new("TextLabel")
        titleLabel.Size = UDim2.new(1,-20,1,0)
        titleLabel.Position = UDim2.new(0,10,0,0)
        titleLabel.Text = "Xu-hub"
        titleLabel.TextColor3 = Color3.fromRGB(255,255,255)
        titleLabel.BackgroundTransparency = 1
        titleLabel.TextXAlignment = Enum.TextXAlignment.Left
        titleLabel.Font = Enum.Font.SourceSansBold
        titleLabel.TextSize = 32
        titleLabel.Parent = titleBar

        -- 關閉按鈕
        local closeBtn = Instance.new("TextButton")
        closeBtn.Size = UDim2.new(0,30,0,30)
        closeBtn.Position = UDim2.new(1,-40,0,10)
        closeBtn.Text = "X"
        closeBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)
        closeBtn.BackgroundTransparency = 0.2
        closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
        closeBtn.Parent = titleBar
        closeBtn.MouseButton1Click:Connect(function()
            mainFrame:Destroy()
            toggleBtn:Destroy()
        end)

        -- 縮小化按鈕 (-)
        local minimizeBtn = Instance.new("TextButton")
        minimizeBtn.Size = UDim2.new(0,30,0,30)
        minimizeBtn.Position = UDim2.new(1,-80,0,10)
        minimizeBtn.Text = "-"
        minimizeBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)
        minimizeBtn.BackgroundTransparency = 0.2
        minimizeBtn.TextColor3 = Color3.fromRGB(255,255,255)
        minimizeBtn.Parent = titleBar

        local isMinimized = false
        local originalSize = mainFrame.Size
        local originalPosition = mainFrame.Position

        -- 左側側欄
        local sideBar = Instance.new("ScrollingFrame")
        sideBar.Size = UDim2.new(0,180,1,-50)
        sideBar.Position = UDim2.new(0,0,0,50)
        sideBar.BackgroundColor3 = Color3.fromRGB(50,50,50)
        sideBar.BackgroundTransparency = 0.4
        sideBar.BorderSizePixel = 0
        sideBar.ScrollBarThickness = 6
        sideBar.Parent = mainFrame
        local sideUICorner = Instance.new("UICorner")
        sideUICorner.CornerRadius = UDim.new(0,10)
        sideUICorner.Parent = sideBar

        -- 右側內容區
        local contentFrame = Instance.new("ScrollingFrame")
        contentFrame.Size = UDim2.new(1,-180,1,-50)
        contentFrame.Position = UDim2.new(0,180,0,50)
        contentFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
        contentFrame.BackgroundTransparency = 0.8
        contentFrame.BorderSizePixel = 0
        contentFrame.ScrollBarThickness = 6
        contentFrame.Parent = mainFrame
        local contentCorner = Instance.new("UICorner")
        contentCorner.CornerRadius = UDim.new(0,10)
        contentCorner.Parent = contentFrame

        -- 縮小功能
        minimizeBtn.MouseButton1Click:Connect(function()
            if not isMinimized then
                mainFrame.Size = UDim2.new(0, originalSize.X.Offset, 0, titleBar.Size.Y.Offset)
                isMinimized = true
                contentFrame.Visible = false
                sideBar.Visible = false
            else
                mainFrame.Size = originalSize
                mainFrame.Position = originalPosition
                isMinimized = false
                contentFrame.Visible = true
                sideBar.Visible = true
            end
        end)

        -- ===== 側欄按鈕 =====
        local buttonNames = {
            "通用", "設定", "Server", "狀態", "PVP", 
            "Farm", "自動", "傳送", "未解鎖", "未解鎖"
        }

        local buttons = {}
        for i=1,10 do
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1,-20,0,50)
            btn.Position = UDim2.new(0,10,0,10 + (i-1)*60)
            btn.Text = buttonNames[i]
            btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
            btn.TextColor3 = Color3.fromRGB(255,255,255)
            btn.BorderSizePixel = 0
            btn.TextScaled = true
            btn.Font = Enum.Font.SourceSansBold
            btn.Parent = sideBar

            local btnCorner = Instance.new("UICorner")
            btnCorner.CornerRadius = UDim.new(0,10)
            btnCorner.Parent = btn

            local indicator = Instance.new("Frame")
            indicator.Size = UDim2.new(0,4,1,0)
            indicator.Position = UDim2.new(0,0,0,0)
            indicator.BackgroundColor3 = Color3.fromRGB(0,120,255)
            indicator.Visible = false
            indicator.Parent = btn

            buttons[i] = {Button = btn, Indicator = indicator}
        end

        -- ===== 右側內容生成函數 =====
        local function createOptionRow(parent, yPos, labelText, contentFunc)
            local rowFrame = Instance.new("Frame")
            rowFrame.Size = UDim2.new(1,-20,0,50)
            rowFrame.Position = UDim2.new(0,10,0,yPos)
            rowFrame.BackgroundColor3 = Color3.fromRGB(50,50,50)
            rowFrame.BorderSizePixel = 0
            rowFrame.Parent = parent

            local rowCorner = Instance.new("UICorner")
            rowCorner.CornerRadius = UDim.new(0,10)
            rowCorner.Parent = rowFrame

            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(0,160,1,0)
            label.Position = UDim2.new(0,10,0,0)
            label.BackgroundTransparency = 1
            label.Text = labelText
            label.TextColor3 = Color3.fromRGB(255,255,255)
            label.TextScaled = true
            label.TextSize = 20
            label.TextWrapped = false
            label.TextXAlignment = Enum.TextXAlignment.Left
            label.Parent = rowFrame

            contentFunc(rowFrame)
            return rowFrame
        end

        -- ===== 右側內容 =====
        local function showContent(index)
            contentFrame:ClearAllChildren()
            for i,b in ipairs(buttons) do
                b.Indicator.Visible = (i==index)
            end
            
            if index == 1 then
                    local y = 10
-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "通用"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 40      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

y = y + 60 -- 下一個選項的 y 位置

        -- 建立 ESP 滑動開關
        createOptionRow(contentFrame, y, "ESP", function(row)
            local switchBg = Instance.new("Frame")
            switchBg.Size = UDim2.new(0,60,0.5,0)
            switchBg.Position = UDim2.new(1,-70,0.25,0)
            switchBg.BackgroundColor3 = ESP_ENABLED and Color3.fromRGB(0,200,0) or Color3.fromRGB(100,100,100)
            switchBg.BorderSizePixel = 0
            switchBg.Parent = row
            Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0,20)

            local knob = Instance.new("Frame")
            knob.Size = UDim2.new(0,28,1,0)
            knob.Position = ESP_ENABLED and UDim2.new(1,-28,0,0) or UDim2.new(0,0,0,0)
            knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
            knob.BorderSizePixel = 0
            knob.Parent = switchBg
            Instance.new("UICorner", knob).CornerRadius = UDim.new(0,20)

            local function toggleESP()
                ESP_ENABLED = not ESP_ENABLED
                if ESP_ENABLED then
                    knob:TweenPosition(UDim2.new(1,-28,0,0),"Out","Quad",0.2,true)
                    switchBg.BackgroundColor3 = Color3.fromRGB(0,200,0)
                else
                    knob:TweenPosition(UDim2.new(0,0,0,0),"Out","Quad",0.2,true)
                    switchBg.BackgroundColor3 = Color3.fromRGB(100,100,100)
                end

                -- 創建或移除 ESP
                for _, p in ipairs(Players:GetPlayers()) do
                    if ESP_ENABLED then createESP(p) else removeESP(p) end
                end
            end

            switchBg.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    toggleESP()
                end
            end)
        end)
        y = y + 60
        
        -- ================= Noclip =================
        createOptionRow(contentFrame, y, "穿牆", function(row)
            local switchBg = Instance.new("Frame")
            switchBg.Size = UDim2.new(0,60,0.5,0)
            switchBg.Position = UDim2.new(1,-70,0.25,0)
            switchBg.BackgroundColor3 = NOCLIP_ENABLED and Color3.fromRGB(0,200,0) or Color3.fromRGB(100,100,100)
            switchBg.BorderSizePixel = 0
            switchBg.Parent = row
            Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0,20)

            local knob = Instance.new("Frame")
            knob.Size = UDim2.new(0,28,1,0)
            knob.Position = NOCLIP_ENABLED and UDim2.new(1,-28,0,0) or UDim2.new(0,0,0,0)
            knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
            knob.BorderSizePixel = 0
            knob.Parent = switchBg
            Instance.new("UICorner", knob).CornerRadius = UDim.new(0,20)

            local function toggleNoclip()
                NOCLIP_ENABLED = not NOCLIP_ENABLED
                setNoclipState(NOCLIP_ENABLED)

                if NOCLIP_ENABLED then
                    knob:TweenPosition(UDim2.new(1,-28,0,0),"Out","Quad",0.2,true)
                    switchBg.BackgroundColor3 = Color3.fromRGB(0,200,0)
                else
                    knob:TweenPosition(UDim2.new(0,0,0,0),"Out","Quad",0.2,true)
                    switchBg.BackgroundColor3 = Color3.fromRGB(100,100,100)
                end
            end

            switchBg.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    toggleNoclip()
                end
            end)
        end)

        y = y + 60

            elseif index == 2 then
                    local y = 10
-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "提高FPS"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 40      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

y = y + 60 -- 下一個選項的 y 位置

createOptionRow(contentFrame, y, "低配模式", function(row)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 40, 0.7, 0) 
    button.Position = UDim2.new(1, -70, 0.15, 0) 
    button.BackgroundTransparency = 1 
    button.Text = "◉"
    button.TextScaled = true
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.SourceSansBold
    button.Parent = row

    local clicked = false

    button.MouseButton1Click:Connect(function()
        if clicked then return end
        clicked = true
        local tweenService = game:GetService("TweenService")
        local shrinkInfo = TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local shrinkGoal = {Size = UDim2.new(0, 30, 0.7, 0)}
        local growGoal = {Size = UDim2.new(0, 40, 0.7, 0)}
        local shrinkTween = tweenService:Create(button, shrinkInfo, shrinkGoal)
        local growTween = tweenService:Create(button, shrinkInfo, growGoal)
        shrinkTween:Play()
        shrinkTween.Completed:Connect(function()
            growTween:Play()
        end)
        local flashInfo = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local flashGoal = {TextColor3 = Color3.fromRGB(255, 255, 0)}
        local restoreGoal = {TextColor3 = Color3.fromRGB(255, 255, 255)}
        local flashTween = tweenService:Create(button, flashInfo, flashGoal)
        local restoreTween = tweenService:Create(button, flashInfo, restoreGoal)
        flashTween:Play()
        flashTween.Completed:Connect(function()
            restoreTween:Play()
        end)
        button.TextColor3 = Color3.fromRGB(150, 150, 150)
        button.TextTransparency = 0.5
        task.delay(1, function()
            ApplyLowGraphics(true)
        end)
    end)
end)

y = y + 60

         -- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "遊戲內"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 40      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

y = y + 60 -- 下一個選項的 y 位置

-- ================= Anti AFK Button =================
createOptionRow(contentFrame, y, "Anti AFK", function(row)

    local switchBg = Instance.new("Frame")
    switchBg.Size = UDim2.new(0, 60, 0.5, 0)
    switchBg.Position = UDim2.new(1, -70, 0.25, 0)
    switchBg.BackgroundColor3 = AntiAFK_ENABLED 
        and Color3.fromRGB(0, 200, 0) 
        or Color3.fromRGB(100, 100, 100)
    switchBg.BorderSizePixel = 0
    switchBg.Parent = row
    Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0, 20)

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0, 28, 1, 0)
    knob.Position = AntiAFK_ENABLED 
        and UDim2.new(1, -28, 0, 0) 
        or UDim2.new(0, 0, 0, 0)
    knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    knob.BorderSizePixel = 0
    knob.Parent = switchBg
    Instance.new("UICorner", knob).CornerRadius = UDim.new(0, 20)

    -- 點擊切換
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 1, 0)
    button.BackgroundTransparency = 1
    button.Text = ""
    button.Parent = switchBg

    button.MouseButton1Click:Connect(function()
        AntiAFK_ENABLED = not AntiAFK_ENABLED

        if AntiAFK_ENABLED then
            enableAntiAFK()
        else
            disableAntiAFK()
        end

        -- 視覺更新
        switchBg.BackgroundColor3 = AntiAFK_ENABLED
            and Color3.fromRGB(0, 200, 0)
            or Color3.fromRGB(100, 100, 100)

        knob:TweenPosition(
            AntiAFK_ENABLED and UDim2.new(1, -28, 0, 0) or UDim2.new(0, 0, 0, 0),
            Enum.EasingDirection.Out,
            Enum.EasingStyle.Quad,
            0.15,
            true
        )
    end)
end)

        y = y + 60

createOptionRow(contentFrame, y, "移動速度", function(row)
    local switchBg = Instance.new("Frame")
    switchBg.Size = UDim2.new(0,60,0.5,0)
    switchBg.Position = UDim2.new(1,-70,0.25,0)
    switchBg.BackgroundColor3 = enabled and Color3.fromRGB(0,200,0) or Color3.fromRGB(100,100,100)
    switchBg.BorderSizePixel = 0
    switchBg.Parent = row
    Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0,20)

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0,28,1,0)
    knob.Position = enabled and UDim2.new(1,-28,0,0) or UDim2.new(0,0,0,0)
    knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
    knob.BorderSizePixel = 0
    knob.Parent = switchBg
    Instance.new("UICorner", knob).CornerRadius = UDim.new(0,20)

    local function toggle()
        enabled = not enabled
        toggleMove(enabled)
        if enabled then
            knob:TweenPosition(UDim2.new(1,-28,0,0),"Out","Quad",0.2,true)
            switchBg.BackgroundColor3 = Color3.fromRGB(0,200,0)
        else
            knob:TweenPosition(UDim2.new(0,0,0,0),"Out","Quad",0.2,true)
            switchBg.BackgroundColor3 = Color3.fromRGB(100,100,100)
        end
    end

    switchBg.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then toggle() end
    end)
end)

y += 60

-- 速度調整
createOptionRow(contentFrame, y, "速度調整:", function(row)
    local inputBox = Instance.new("TextBox")
    inputBox.Size = UDim2.new(0,80,0.6,0)
    inputBox.Position = UDim2.new(0,130,0.2,0)
    inputBox.BackgroundColor3 = Color3.fromRGB(70,70,70)
    inputBox.TextColor3 = Color3.fromRGB(255,255,255)
    inputBox.TextScaled = true
    inputBox.ClearTextOnFocus = false
    inputBox.Text = tostring(SLIDE_MAGNITUDE)
    inputBox.Parent = row

    local slider = Instance.new("Frame")
    slider.Size = UDim2.new(0,200,0.3,0)
    slider.Position = UDim2.new(0,220,0.35,0)
    slider.BackgroundColor3 = Color3.fromRGB(100,100,100)
    slider.Parent = row

    local fill = Instance.new("Frame")
    fill.Size = UDim2.new(SLIDE_MAGNITUDE/MAX_SPEED,0,1,0)
    fill.BackgroundColor3 = Color3.fromRGB(0,200,255)
    fill.Parent = slider

                    local maxLabel = Instance.new("TextLabel")
                    maxLabel.Size = UDim2.new(0,80,1,0)
                    maxLabel.Position = UDim2.new(0,430,0,0)
                    maxLabel.BackgroundTransparency = 1
                    maxLabel.Text = "(max:1000)"
                    maxLabel.TextColor3 = Color3.fromRGB(200,200,200)
                    maxLabel.TextScaled = true
                    maxLabel.TextXAlignment = Enum.TextXAlignment.Left
                    maxLabel.Parent = row

    local dragging = false

    slider.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
    end)
    slider.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
    end)
    slider.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local mouseX = input.Position.X - slider.AbsolutePosition.X
            mouseX = math.clamp(mouseX,0,slider.AbsoluteSize.X)
            local speed = (mouseX/slider.AbsoluteSize.X)*MAX_SPEED
            SLIDE_MAGNITUDE = speed
            inputBox.Text = tostring(math.floor(speed))
            fill.Size = UDim2.new(mouseX/slider.AbsoluteSize.X,0,1,0)
        end
    end)

    inputBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            local val = tonumber(inputBox.Text)
            if val then
                SLIDE_MAGNITUDE = math.clamp(val,0,MAX_SPEED)
                inputBox.Text = tostring(math.floor(SLIDE_MAGNITUDE))
                fill.Size = UDim2.new(SLIDE_MAGNITUDE/MAX_SPEED,0,1,0)
            else
                inputBox.Text = tostring(math.floor(SLIDE_MAGNITUDE))
            end
        end
    end)
end)

 y = y + 60

-- ================= 跳躍開關 (帶滑動動畫) =================
createOptionRow(contentFrame, y, "跳躍開關", function(row)
    local switchBg = Instance.new("Frame")
    switchBg.Size = UDim2.new(0,60,0.5,0)
    switchBg.Position = UDim2.new(1,-70,0.25,0)
    switchBg.BackgroundColor3 = JumpSettings.Enabled and Color3.fromRGB(0,200,0) or Color3.fromRGB(100,100,100)
    switchBg.BorderSizePixel = 0
    switchBg.Parent = row
    Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0,20)

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0,28,1,0)
    knob.Position = JumpSettings.Enabled and UDim2.new(1,-28,0,0) or UDim2.new(0,0,0,0)
    knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
    knob.BorderSizePixel = 0
    knob.Parent = switchBg
    Instance.new("UICorner", knob).CornerRadius = UDim.new(0,20)

    local TweenService = game:GetService("TweenService")
    
    local function toggleSwitch()
        JumpSettings.Enabled = not JumpSettings.Enabled

        -- 背景顏色動畫
        local bgTween = TweenService:Create(switchBg, TweenInfo.new(0.2), {BackgroundColor3 = JumpSettings.Enabled and Color3.fromRGB(0,200,0) or Color3.fromRGB(100,100,100)})
        bgTween:Play()

        -- knob 滑動動畫
        local knobTween = TweenService:Create(knob, TweenInfo.new(0.2), {Position = JumpSettings.Enabled and UDim2.new(1,-28,0,0) or UDim2.new(0,0,0,0)})
        knobTween:Play()

        -- 更新跳躍
        updateJumpPower(game.Players.LocalPlayer)
    end

    -- 點擊切換
    switchBg.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            toggleSwitch()
        end
    end)
end)

y = y + 60

-- 滑桿控制跳躍高度
createOptionRow(contentFrame, y, "跳躍高度", function(row)
    local inputBox = Instance.new("TextBox")
    inputBox.Size = UDim2.new(0,80,0.6,0)
    inputBox.Position = UDim2.new(0,130,0.2,0)
    inputBox.BackgroundColor3 = Color3.fromRGB(70,70,70)
    inputBox.TextColor3 = Color3.fromRGB(255,255,255)
    inputBox.TextScaled = true
    inputBox.ClearTextOnFocus = false
    inputBox.Text = tostring(JumpSettings.JumpPower)
    inputBox.Parent = row

    local slider = Instance.new("Frame")
    slider.Size = UDim2.new(0,200,0.3,0)
    slider.Position = UDim2.new(0,220,0.35,0)
    slider.BackgroundColor3 = Color3.fromRGB(100,100,100)
    slider.Parent = row

    local fill = Instance.new("Frame")
    fill.Size = UDim2.new(JumpSettings.JumpPower/JumpSettings.MaxJumpPower,0,1,0)
    fill.BackgroundColor3 = Color3.fromRGB(255,200,0)
    fill.Parent = slider

    local maxLabel = Instance.new("TextLabel")
    maxLabel.Size = UDim2.new(0,80,1,0)
    maxLabel.Position = UDim2.new(0,430,0,0)
    maxLabel.BackgroundTransparency = 1
    maxLabel.Text = "(max:500)"
    maxLabel.TextColor3 = Color3.fromRGB(200,200,200)
    maxLabel.TextScaled = true
    maxLabel.TextXAlignment = Enum.TextXAlignment.Left
    maxLabel.Parent = row

    -- 滑桿拖曳
    local dragging = false
    slider.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
        end
    end)
    slider.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    slider.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local relativeX = math.clamp(input.Position.X - slider.AbsolutePosition.X, 0, slider.AbsoluteSize.X)
            JumpSettings.JumpPower = math.floor((relativeX / slider.AbsoluteSize.X) * JumpSettings.MaxJumpPower)
            fill.Size = UDim2.new(JumpSettings.JumpPower/JumpSettings.MaxJumpPower,0,1,0)
            inputBox.Text = tostring(JumpSettings.JumpPower)
            updateJumpPower(game.Players.LocalPlayer)
        end
    end)
    -- 文字框直接輸入
    inputBox.FocusLost:Connect(function()
        local val = tonumber(inputBox.Text)
        if val then
            JumpSettings.JumpPower = math.clamp(val,0,JumpSettings.MaxJumpPower)
            fill.Size = UDim2.new(JumpSettings.JumpPower/JumpSettings.MaxJumpPower,0,1,0)
            updateJumpPower(game.Players.LocalPlayer)
        else
            inputBox.Text = tostring(JumpSettings.JumpPower)
        end
    end)
end)

y = y + 60

        elseif index == 3 then
                    local y = 10
-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "Server"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 40      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

y = y + 60 -- 下一個選項的 y 位置

-- ===== Hop Server =====
createOptionRow(contentFrame, y, "切換伺服器(無反應)", function(row)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 40, 0.7, 0)
    button.Position = UDim2.new(1, -70, 0.15, 0)
    button.BackgroundTransparency = 1
    button.Text = "◉"
    button.TextScaled = true
    button.TextColor3 = Color3.fromRGB(255,255,255)
    button.Font = Enum.Font.SourceSansBold
    button.Parent = row

    local tweenService = game:GetService("TweenService")
    local player = game.Players.LocalPlayer
    local HttpService = game:GetService("HttpService")
    local TeleportService = game:GetService("TeleportService")
    local PlaceId = game.PlaceId

    button.MouseButton1Click:Connect(function()
        -- 動畫
        local shrinkTween = tweenService:Create(button, TweenInfo.new(0.1), {Size=UDim2.new(0,30,0.7,0)})
        local growTween = tweenService:Create(button, TweenInfo.new(0.1), {Size=UDim2.new(0,40,0.7,0)})
        shrinkTween:Play()
        shrinkTween.Completed:Connect(function() growTween:Play() end)

        local flashTween = tweenService:Create(button, TweenInfo.new(0.15), {TextColor3=Color3.fromRGB(255,255,0)})
        local restoreTween = tweenService:Create(button, TweenInfo.new(0.15), {TextColor3=Color3.fromRGB(255,255,255)})
        flashTween:Play()
        flashTween.Completed:Connect(function() restoreTween:Play() end)

        -- 功能
        task.spawn(function()
            local AllServers = {}
            local cursor = ""

            repeat
                local url = "https://games.roblox.com/v1/games/"..PlaceId.."/servers/Public?limit=100"
                if cursor ~= "" then url = url.."&cursor="..cursor end
                local success, response = pcall(function()
                    return HttpService:JSONDecode(game:HttpGet(url))
                end)
                if success and response and response.data then
                    for _, s in ipairs(response.data) do
                        if s.id ~= game.JobId and s.playing < s.maxPlayers then
                            table.insert(AllServers, s)
                        end
                    end
                    cursor = response.nextPageCursor or ""
                else
                    cursor = ""
                end
            until cursor == ""

            if #AllServers == 0 then return end

            table.sort(AllServers, function(a,b) return a.playing < b.playing end)
            TeleportService:TeleportToPlaceInstance(PlaceId, AllServers[1].id, player)
        end)
    end)
end)

y = y + 60

-- ===== Rejoin =====
createOptionRow(contentFrame, y, "重進伺服器", function(row)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 40, 0.7, 0)
    button.Position = UDim2.new(1, -70, 0.15, 0)
    button.BackgroundTransparency = 1
    button.Text = "◉"
    button.TextScaled = true
    button.TextColor3 = Color3.fromRGB(255,255,255)
    button.Font = Enum.Font.SourceSansBold
    button.Parent = row

    local tweenService = game:GetService("TweenService")
    local player = game.Players.LocalPlayer
    local TeleportService = game:GetService("TeleportService")

    button.MouseButton1Click:Connect(function()
        local shrinkTween = tweenService:Create(button, TweenInfo.new(0.1), {Size=UDim2.new(0,30,0.7,0)})
        local growTween = tweenService:Create(button, TweenInfo.new(0.1), {Size=UDim2.new(0,40,0.7,0)})
        shrinkTween:Play()
        shrinkTween.Completed:Connect(function() growTween:Play() end)

        local flashTween = tweenService:Create(button, TweenInfo.new(0.15), {TextColor3=Color3.fromRGB(255,255,0)})
        local restoreTween = tweenService:Create(button, TweenInfo.new(0.15), {TextColor3=Color3.fromRGB(255,255,255)})
        flashTween:Play()
        flashTween.Completed:Connect(function() restoreTween:Play() end)

        task.spawn(function()
            TeleportService:Teleport(game.PlaceId, player)
        end)
    end)
end)

y = y + 60

-- ===== Join Low Player Server =====
createOptionRow(contentFrame, y, "加入到少人伺服器", function(row)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 40, 0.7, 0)
    button.Position = UDim2.new(1, -70, 0.15, 0)
    button.BackgroundTransparency = 1
    button.Text = "◉"
    button.TextScaled = true
    button.TextColor3 = Color3.fromRGB(255,255,255)
    button.Font = Enum.Font.SourceSansBold
    button.Parent = row

    local tweenService = game:GetService("TweenService")
    local player = game.Players.LocalPlayer
    local TeleportService = game:GetService("TeleportService")
    local HttpService = game:GetService("HttpService")
    local PlaceId = game.PlaceId

    button.MouseButton1Click:Connect(function()
        local shrinkTween = tweenService:Create(button, TweenInfo.new(0.1), {Size=UDim2.new(0,30,0.7,0)})
        local growTween = tweenService:Create(button, TweenInfo.new(0.1), {Size=UDim2.new(0,40,0.7,0)})
        shrinkTween:Play()
        shrinkTween.Completed:Connect(function() growTween:Play() end)

        local flashTween = tweenService:Create(button, TweenInfo.new(0.15), {TextColor3=Color3.fromRGB(255,255,0)})
        local restoreTween = tweenService:Create(button, TweenInfo.new(0.15), {TextColor3=Color3.fromRGB(255,255,255)})
        flashTween:Play()
        flashTween.Completed:Connect(function() restoreTween:Play() end)

        task.spawn(function()
            local AllServers = {}
            local success, servers = pcall(function()
                return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/"..PlaceId.."/servers/Public?sortOrder=Asc&limit=100"))
            end)
            if success and servers and servers.data then
                for _, s in ipairs(servers.data) do
                    if s.id ~= game.JobId and s.playing < s.maxPlayers then
                        table.insert(AllServers, s.id)
                    end
                end
            end
            if #AllServers > 0 then
                local randId = AllServers[math.random(1,#AllServers)]
                TeleportService:TeleportToPlaceInstance(PlaceId, randId, player)
            end
        end)
    end)
end)

y = y + 60

elseif index == 4 then
    local y = 10
    -- ===== 彩虹大標題 =====
    local mainTitle = Instance.new("TextLabel")
    mainTitle.Size = UDim2.new(1,-20,0,60)
    mainTitle.Position = UDim2.new(0,10,0,y)
    mainTitle.BackgroundTransparency = 1
    mainTitle.Text = "狀態"
    mainTitle.Font = Enum.Font.SourceSansBold
    mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
    mainTitle.TextXAlignment = Enum.TextXAlignment.Center
    mainTitle.TextYAlignment = Enum.TextYAlignment.Center
    mainTitle.TextSize = 40
    mainTitle.Parent = contentFrame

    -- 彩虹效果
    local hue = 0
    RunService.RenderStepped:Connect(function(dt)
        hue = (hue + dt/2) % 1
        mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
    end)

    y = y + 60 -- 下一個選項的 y 位置

-- ================= ServerInfoGUI (貼齊左右 + 圓角 + 灰色) =================
local frame = Instance.new("Frame", contentFrame)
frame.Size = UDim2.new(1, 0, 0, 375) -- 寬度 100% 貼齊左右
frame.Position = UDim2.new(0, 0, 0, y)
frame.BackgroundColor3 = Color3.fromRGB(50,50,50) -- 灰色
frame.BorderSizePixel = 0

-- 圓角
local uicorner = Instance.new("UICorner", frame)
uicorner.CornerRadius = UDim.new(0, 20) -- 20 像素圓角，可調整

local function createLabel(yPos)
    local l = Instance.new("TextLabel", frame)
    l.Size = UDim2.new(1, -30, 0, 38) -- 左右留點邊距
    l.Position = UDim2.new(0, 15, 0, yPos)
    l.BackgroundTransparency = 1
    l.TextXAlignment = Enum.TextXAlignment.Left
    l.Font = Enum.Font.SourceSans
    l.TextSize = 25
    l.TextColor3 = Color3.new(1,1,1)
    return l
end

local playerLabel = createLabel(50)
local timeLabel = createLabel(95)
local pingLabel = createLabel(140) -- 調整位置，把 Ping 往上移
local placeLabel = createLabel(185) -- 也往上移
placeLabel.Text = "PlaceId: "..game.PlaceId

-- 複製按鈕
local copyBtn = Instance.new("TextButton", frame)
copyBtn.Size = UDim2.new(0, 90, 0, 33)
copyBtn.Position = UDim2.new(1, -105, 0, 190) -- 調整位置
copyBtn.Text = "Copy"
copyBtn.Font = Enum.Font.SourceSansBold
copyBtn.TextSize = 20
copyBtn.MouseButton1Click:Connect(function()
    if setclipboard then
        setclipboard(tostring(game.PlaceId))
    end
end)

-- ================= 輸入框 + Join + Clear =================
local inputBox = Instance.new("TextBox", frame)
inputBox.Size = UDim2.new(1, -235, 0, 38) -- 留右側空間給 Join + Clear
inputBox.Position = UDim2.new(0, 15, 0, 235)
inputBox.ClearTextOnFocus = false
inputBox.Font = Enum.Font.SourceSans
inputBox.TextSize = 25
inputBox.Text = "" 

-- Join 按鈕
local joinBtn = Instance.new("TextButton", frame)
joinBtn.Size = UDim2.new(0, 90, 0, 38)
joinBtn.Position = UDim2.new(1, -105, 0, 235)
joinBtn.Text = "Join"
joinBtn.Font = Enum.Font.SourceSansBold
joinBtn.TextSize = 20
joinBtn.MouseButton1Click:Connect(function()
    local id = tonumber(inputBox.Text)
    if id and id == game.PlaceId then
        game:GetService("TeleportService"):Teleport(id, game.Players.LocalPlayer)
    end
end)

-- Clear 按鈕（放在 Join 按鈕左側）
local clearBtn = Instance.new("TextButton", frame)
clearBtn.Size = UDim2.new(0, 38, 0, 38) -- 方形按鈕
clearBtn.Position = UDim2.new(1, -220, 0, 235) -- 緊靠 Join 按鈕左側
clearBtn.Text = "清除"
clearBtn.Font = Enum.Font.SourceSansBold
clearBtn.TextSize = 20
clearBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
clearBtn.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
clearBtn.BorderSizePixel = 0
clearBtn.MouseButton1Click:Connect(function()
    inputBox.Text = "" -- 點擊清空輸入框
end)


-- ================= Drag Function =================
local dragging, dragStart, startPos
frame.InputBegan:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = i.Position
        startPos = frame.Position
    end
end)
UserInputService.InputChanged:Connect(function(i)
    if dragging and i.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = i.Position - dragStart
        frame.Position = UDim2.new(
            startPos.X.Scale, startPos.X.Offset + delta.X,
            startPos.Y.Scale, startPos.Y.Offset + delta.Y
        )
    end
end)
UserInputService.InputEnded:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- ================= Update =================
local joinTime = tick()
RunService.RenderStepped:Connect(function()
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    -- 玩家數
    playerLabel.Text = string.format("Players: %d / %d", #Players:GetPlayers(), Players.MaxPlayers)
    
    -- 本地時間
local t = os.date("*t")
timeLabel.Text = string.format(
    "Local Time: %04d-%02d-%02d %02d:%02d",
    t.year, t.month, t.day, t.hour, t.min
)
    -- Ping
    local ping = LocalPlayer:GetNetworkPing() * 1000
    pingLabel.Text = string.format("Ping: %.0f ms", ping)
end)

            elseif index == 5 then
                    local y = 10

-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "PVP"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 40      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

y = y + 60 -- 下一個選項的 y 位置

                -- 自動攻擊開關
                createOptionRow(contentFrame, y, "自動攻擊", function(row)
                    local switchBg = Instance.new("Frame")
                    switchBg.Size = UDim2.new(0,60,0.5,0)
                    switchBg.Position = UDim2.new(1,-70,0.25,0)
                    switchBg.BackgroundColor3 = Settings.AutoClick and Color3.fromRGB(0,200,0) or Color3.fromRGB(100,100,100)
                    switchBg.BorderSizePixel = 0
                    switchBg.Parent = row
                    local switchCorner = Instance.new("UICorner")
                    switchCorner.CornerRadius = UDim.new(0,20)
                    switchCorner.Parent = switchBg

                    local knob = Instance.new("Frame")
                    knob.Size = UDim2.new(0,28,1,0)
                    knob.Position = Settings.AutoClick and UDim2.new(1, -28, 0, 0) or UDim2.new(0,0,0,0)
                    knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
                    knob.BorderSizePixel = 0
                    knob.Parent = switchBg
                    local knobCorner = Instance.new("UICorner")
                    knobCorner.CornerRadius = UDim.new(0,20)
                    knobCorner.Parent = knob

                    local toggled = Settings.AutoClick
                    local function toggleSwitch()
                        toggled = not toggled
                        Settings.AutoClick = toggled
                        if toggled then
                            knob:TweenPosition(UDim2.new(1,-28,0,0),"Out","Quad",0.2,true)
                            switchBg.BackgroundColor3 = Color3.fromRGB(0,200,0)
                        else
                            knob:TweenPosition(UDim2.new(0,0,0,0),"Out","Quad",0.2,true)
                            switchBg.BackgroundColor3 = Color3.fromRGB(100,100,100)
                        end
                    end
                    switchBg.InputBegan:Connect(function(input)
                        if input.UserInputType == Enum.UserInputType.MouseButton1 then toggleSwitch() end
                    end)
                end)
				
                y = y + 60

				                -- 攻擊距離滑條
                createOptionRow(contentFrame, y, "攻擊距離:", function(row)
                    local inputBox = Instance.new("TextBox")
                    inputBox.Size = UDim2.new(0,80,0.6,0)
                    inputBox.Position = UDim2.new(0,130,0.2,0)
                    inputBox.BackgroundColor3 = Color3.fromRGB(70,70,70)
                    inputBox.TextColor3 = Color3.fromRGB(255,255,255)
                    inputBox.TextScaled = true
                    inputBox.ClearTextOnFocus = false
                    inputBox.Text = tostring(Settings.Distance)
                    inputBox.Parent = row

                    local slider = Instance.new("Frame")
                    slider.Size = UDim2.new(0,200,0.3,0)
                    slider.Position = UDim2.new(0,220,0.35,0)
                    slider.BackgroundColor3 = Color3.fromRGB(100,100,100)
                    slider.Parent = row
                    local fill = Instance.new("Frame")
                    fill.Size = UDim2.new(Settings.Distance/1000,0,1,0)
                    fill.BackgroundColor3 = Color3.fromRGB(255,200,0)
                    fill.Parent = slider

                    local maxLabel = Instance.new("TextLabel")
                    maxLabel.Size = UDim2.new(0,80,1,0)
                    maxLabel.Position = UDim2.new(0,430,0,0)
                    maxLabel.BackgroundTransparency = 1
                    maxLabel.Text = "(max:1000m)"
                    maxLabel.TextColor3 = Color3.fromRGB(200,200,200)
                    maxLabel.TextScaled = true
                    maxLabel.TextXAlignment = Enum.TextXAlignment.Left
                    maxLabel.Parent = row

                    local dragging = false
                    local MAX_DISTANCE = 1000

                    slider.InputBegan:Connect(function(input)
                        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
                    end)
                    slider.InputEnded:Connect(function(input)
                        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
                    end)
                    slider.InputChanged:Connect(function(input)
                        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                            local mouseX = input.Position.X - slider.AbsolutePosition.X
                            mouseX = math.clamp(mouseX,0,slider.AbsoluteSize.X)
                            local distance = (mouseX/slider.AbsoluteSize.X)*MAX_DISTANCE
                            Settings.Distance = distance
                            inputBox.Text = tostring(math.floor(distance))
                            fill.Size = UDim2.new(mouseX/slider.AbsoluteSize.X,0,1,0)
                        end
                    end)
                    inputBox.FocusLost:Connect(function(enterPressed)
                        if enterPressed then
                            local val = tonumber(inputBox.Text)
                            if val then
                                local distance = math.clamp(val,0,MAX_DISTANCE)
                                Settings.Distance = distance
                                inputBox.Text = tostring(math.floor(distance))
                                fill.Size = UDim2.new(distance/MAX_DISTANCE,0,1,0)
                            else
                                inputBox.Text = tostring(math.floor(Settings.Distance))
                            end
                        end
                    end)
                end)

                y = y + 60

-- 1️⃣ Fly 開關
createOptionRow(contentFrame, y, "Fly to Player", function(row)
    local switchBg = Instance.new("Frame")
    switchBg.Size = UDim2.new(0,60,0.5,0)
    switchBg.Position = UDim2.new(1,-70,0.25,0)
    switchBg.BackgroundColor3 = Color3.fromRGB(100,100,100)
    switchBg.BorderSizePixel = 0
    switchBg.Parent = row
    Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0,20)

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0,28,1,0)
    knob.Position = UDim2.new(0,0,0,0)
    knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
    knob.BorderSizePixel = 0
    knob.Parent = switchBg
    Instance.new("UICorner", knob).CornerRadius = UDim.new(0,20)

    local function setState(state)
        FlyEnabled = state
        NoclipEnabled = state

        if state then
            EnableFly()
            switchBg.BackgroundColor3 = Color3.fromRGB(0,200,0)
            knob:TweenPosition(UDim2.new(1,-28,0,0),"Out","Quad",0.15,true)
        else
            DisableFly()
            switchBg.BackgroundColor3 = Color3.fromRGB(100,100,100)
            knob:TweenPosition(UDim2.new(0,0,0,0),"Out","Quad",0.15,true)
        end
    end

    switchBg.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            setState(not FlyEnabled)
        end
    end)
end)

y = y + 60

-- 2️⃣ 玩家下拉列表
createOptionRow(contentFrame, y, "選擇玩家", function(row)
    local dropdown = Instance.new("TextButton")
    dropdown.Size = UDim2.new(0,160,0.6,0)
    dropdown.Position = UDim2.new(1,-170,0.2,0)
    dropdown.Text = "點選"
    dropdown.BackgroundColor3 = Color3.fromRGB(60,60,60)
    dropdown.TextColor3 = Color3.new(1,1,1)
    dropdown.Font = Enum.Font.SourceSans
    dropdown.TextSize = 16
    dropdown.Parent = row
    Instance.new("UICorner", dropdown)

    local list = Instance.new("Frame")
    list.Size = UDim2.new(0,160,0,0)
    list.Position = UDim2.new(1,-170,1,5)
    list.BackgroundColor3 = Color3.fromRGB(40,40,40)
    list.Visible = false
    list.ClipsDescendants = true
    list.Parent = row
    Instance.new("UICorner", list)

    local layout = Instance.new("UIListLayout", list)

    local function refreshPlayers()
        for _,c in ipairs(list:GetChildren()) do
            if c:IsA("TextButton") then c:Destroy() end
        end

        for _,plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                local btn = Instance.new("TextButton")
                btn.Size = UDim2.new(1,0,0,30)
                btn.Text = plr.Name
                btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
                btn.TextColor3 = Color3.new(1,1,1)
                btn.Parent = list

                btn.MouseButton1Click:Connect(function()
                    TargetPlayer = plr
                    dropdown.Text = plr.Name
                    list.Visible = false
                    list:TweenSize(UDim2.new(0,160,0,0),"Out","Quad",0.15,true)
                end)
            end
        end

        list.Size = UDim2.new(0,160,0,layout.AbsoluteContentSize.Y)
    end

    dropdown.MouseButton1Click:Connect(function()
        list.Visible = not list.Visible
        refreshPlayers()
        list:TweenSize(
            list.Visible and UDim2.new(0,160,0,layout.AbsoluteContentSize.Y) or UDim2.new(0,160,0,0),
            "Out","Quad",0.15,true
        )
    end)

    Players.PlayerAdded:Connect(refreshPlayers)
    Players.PlayerRemoving:Connect(refreshPlayers)
end)

y = y + 60

            elseif index == 6 then
                    local y = 10
-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "Farm"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 40      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

y = y + 60 -- 下一個選項的 y 位置

        createOptionRow(contentFrame, y, "TP to NPC", function(row)
            local switchBg = Instance.new("Frame")
            switchBg.Size = UDim2.new(0,60,0.5,0)
            switchBg.Position = UDim2.new(1,-70,0.25,0)
            switchBg.BackgroundColor3 = FarmTP.Enabled and Color3.fromRGB(0,200,0)
                or Color3.fromRGB(100,100,100)
            switchBg.BorderSizePixel = 0
            switchBg.Parent = row
            Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0,20)

            local knob = Instance.new("Frame")
            knob.Size = UDim2.new(0,28,1,0)
            knob.Position = FarmTP.Enabled
                and UDim2.new(1,-28,0,0)
                or UDim2.new(0,0,0,0)
            knob.BackgroundColor3 = Color3.fromRGB(255,255,255)
            knob.BorderSizePixel = 0
            knob.Parent = switchBg
            Instance.new("UICorner", knob).CornerRadius = UDim.new(0,20)

            local function toggle()
                FarmTP.Enabled = not FarmTP.Enabled

                if FarmTP.Enabled then
                    knob:TweenPosition(UDim2.new(1,-28,0,0),"Out","Quad",0.2,true)
                    switchBg.BackgroundColor3 = Color3.fromRGB(0,200,0)
                    startFarmTP()
                else
                    knob:TweenPosition(UDim2.new(0,0,0,0),"Out","Quad",0.2,true)
                    switchBg.BackgroundColor3 = Color3.fromRGB(100,100,100)
                    stopFarmTP()
                end
            end

            switchBg.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    toggle()
                end
            end)
        end)

        y = y + 60
        createOptionRow(contentFrame, y, "飛行高度:", function(row)
            local inputBox = Instance.new("TextBox")
            inputBox.Size = UDim2.new(0,80,0.6,0)
            inputBox.Position = UDim2.new(0,130,0.2,0)
            inputBox.BackgroundColor3 = Color3.fromRGB(70,70,70)
            inputBox.TextColor3 = Color3.fromRGB(255,255,255)
            inputBox.TextScaled = true
            inputBox.ClearTextOnFocus = false
            inputBox.Text = tostring(FarmTP.HoverHeight)
            inputBox.Parent = row

            local slider = Instance.new("Frame")
            slider.Size = UDim2.new(0,200,0.3,0)
            slider.Position = UDim2.new(0,220,0.35,0)
            slider.BackgroundColor3 = Color3.fromRGB(100,100,100)
            slider.Parent = row

            local fill = Instance.new("Frame")
            fill.Size = UDim2.new(FarmTP.HoverHeight/50,0,1,0)
            fill.BackgroundColor3 = Color3.fromRGB(255,150,0)
            fill.Parent = slider

            local MAX_HEIGHT = 50
            local dragging = false

            slider.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
            end)
            slider.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
            end)
            slider.InputChanged:Connect(function(input)
                if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                    local x = math.clamp(input.Position.X - slider.AbsolutePosition.X,0,slider.AbsoluteSize.X)
                    local val = math.floor((x/slider.AbsoluteSize.X)*MAX_HEIGHT)
                    FarmTP.HoverHeight = val
                    inputBox.Text = tostring(val)
                    fill.Size = UDim2.new(x/slider.AbsoluteSize.X,0,1,0)
                end
            end)
        end)

        y = y + 60
        createOptionRow(contentFrame, y, "TP範圍:", function(row)
            local inputBox = Instance.new("TextBox")
            inputBox.Size = UDim2.new(0,80,0.6,0)
            inputBox.Position = UDim2.new(0,130,0.2,0)
            inputBox.BackgroundColor3 = Color3.fromRGB(70,70,70)
            inputBox.TextColor3 = Color3.fromRGB(255,255,255)
            inputBox.TextScaled = true
            inputBox.ClearTextOnFocus = false
            inputBox.Text = tostring(FarmTP.Range)
            inputBox.Parent = row

            local slider = Instance.new("Frame")
            slider.Size = UDim2.new(0,200,0.3,0)
            slider.Position = UDim2.new(0,220,0.35,0)
            slider.BackgroundColor3 = Color3.fromRGB(100,100,100)
            slider.Parent = row

            local fill = Instance.new("Frame")
            fill.Size = UDim2.new(FarmTP.Range/2000,0,1,0)
            fill.BackgroundColor3 = Color3.fromRGB(0,255,150)
            fill.Parent = slider

            local MAX_RANGE = 2000
            local dragging = false

            slider.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
            end)
            slider.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
            end)
            slider.InputChanged:Connect(function(input)
                if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                    local x = math.clamp(input.Position.X - slider.AbsolutePosition.X,0,slider.AbsoluteSize.X)
                    local val = math.floor((x/slider.AbsoluteSize.X)*MAX_RANGE)
                    FarmTP.Range = val
                    inputBox.Text = tostring(val)
                    fill.Size = UDim2.new(x/slider.AbsoluteSize.X,0,1,0)
                end
            end)
        end)

        y = y + 60

            elseif index == 7 then
                    local y = 10
-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "自動"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 40      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

        y = y + 60

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

createOptionRow(contentFrame, y, "race v3", function(row)
    local switchBg = Instance.new("Frame")
    switchBg.Size = UDim2.new(0, 60, 0.5, 0)
    switchBg.Position = UDim2.new(1, -70, 0.25, 0)
    switchBg.BackgroundColor3 = Scripts["自動v3"].Enabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(100, 100, 100)
    switchBg.BorderSizePixel = 0
    switchBg.Parent = row
    Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0, 20)

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0, 28, 1, 0)
    knob.Position = Scripts["自動v3"].Enabled and UDim2.new(1, -28, 0, 0) or UDim2.new(0, 0, 0, 0)
    knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    knob.BorderSizePixel = 0
    knob.Parent = switchBg
    Instance.new("UICorner", knob).CornerRadius = UDim.new(0, 20)

    -- 點擊切換開關（帶滑動動畫）
    switchBg.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            Scripts["自動v3"].Enabled = not Scripts["自動v3"].Enabled
            if Scripts["自動v3"].Enabled then
                Scripts["自動v3"]:Func()
            else
                Scripts["自動v3"]:StopFunc()
            end

            -- 更新UI顏色
            switchBg.BackgroundColor3 = Scripts["自動v3"].Enabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(100, 100, 100)

            -- Tween 滑塊滑動
            local targetPos = Scripts["自動v3"].Enabled and UDim2.new(1, -28, 0, 0) or UDim2.new(0, 0, 0, 0)
            local tween = TweenService:Create(knob, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = targetPos})
            tween:Play()
        end
    end)
end)
        y = y + 60

createOptionRow(contentFrame, y, "race v4", function(row)
    local switchBg = Instance.new("Frame")
    switchBg.Size = UDim2.new(0, 60, 0.5, 0)
    switchBg.Position = UDim2.new(1, -70, 0.25, 0)
    switchBg.BackgroundColor3 = Scripts["自動v4"].Enabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(100, 100, 100)
    switchBg.BorderSizePixel = 0
    switchBg.Parent = row
    Instance.new("UICorner", switchBg).CornerRadius = UDim.new(0, 20)

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0, 28, 1, 0)
    knob.Position = Scripts["自動v4"].Enabled and UDim2.new(1, -28, 0, 0) or UDim2.new(0, 0, 0, 0)
    knob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    knob.BorderSizePixel = 0
    knob.Parent = switchBg
    Instance.new("UICorner", knob).CornerRadius = UDim.new(0, 20)

    -- 點擊切換開關（帶滑動動畫）
    local UIS = game:GetService("UserInputService")
    switchBg.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            Scripts["自動v4"].Enabled = not Scripts["自動v4"].Enabled
            if Scripts["自動v4"].Enabled then
                Scripts["自動v4"]:Func()
            else
                Scripts["自動v4"]:StopFunc()
            end

            -- 更新UI顏色
            switchBg.BackgroundColor3 = Scripts["自動v4"].Enabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(100, 100, 100)

            -- Tween 滑塊滑動
            local targetPos = Scripts["自動v4"].Enabled and UDim2.new(1, -28, 0, 0) or UDim2.new(0, 0, 0, 0)
            local tween = TweenService:Create(knob, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = targetPos})
            tween:Play()
        end
    end)
end)

        y = y + 60

            elseif index == 8 then
                    local y = 10
-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "blox fruit"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 40      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

        y = y + 60

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

createOptionRow(contentFrame, y, "安全區(二海)", function(row)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 40, 0.7, 0)
    button.Position = UDim2.new(1, -70, 0.15, 0)
    button.BackgroundTransparency = 1
    button.Text = "◉"
    button.TextScaled = true
    button.TextColor3 = Color3.fromRGB(255,255,255)
    button.Font = Enum.Font.SourceSansBold
    button.Parent = row

    button.MouseButton1Click:Connect(function()
        -- ===== 動畫效果 =====
        local shrinkTween = TweenService:Create(button, TweenInfo.new(0.1), {Size=UDim2.new(0,30,0.7,0)})
        local growTween = TweenService:Create(button, TweenInfo.new(0.1), {Size=UDim2.new(0,40,0.7,0)})
        shrinkTween:Play()
        shrinkTween.Completed:Connect(function() growTween:Play() end)

        local flashTween = TweenService:Create(button, TweenInfo.new(0.15), {TextColor3=Color3.fromRGB(255,255,0)})
        local restoreTween = TweenService:Create(button, TweenInfo.new(0.15), {TextColor3=Color3.fromRGB(255,255,255)})
        flashTween:Play()
        flashTween.Completed:Connect(function() restoreTween:Play() end)

        -- ===== 傳送功能 =====
        local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local hrp = character:WaitForChild("HumanoidRootPart")
        hrp.CFrame = TARGET_CFRAME
    end)
end)

            elseif index == 9 then
                    local y = 10
-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "未解鎖"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 100      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

y = y + 60 -- 下一個選項的 y 位置

            elseif index == 10 then
                    local y = 10
-- ===== 彩虹大標題 =====
local mainTitle = Instance.new("TextLabel")
mainTitle.Size = UDim2.new(1,-20,0,60)
mainTitle.Position = UDim2.new(0,10,0,y)
mainTitle.BackgroundTransparency = 1
mainTitle.Text = "未解鎖"
mainTitle.Font = Enum.Font.SourceSansBold
mainTitle.TextColor3 = Color3.fromRGB(255,255,255)
mainTitle.TextXAlignment = Enum.TextXAlignment.Center
mainTitle.TextYAlignment = Enum.TextYAlignment.Center
mainTitle.TextSize = 100      -- ★★★ 在這裡改字大小 ★★★
mainTitle.Parent = contentFrame

-- 彩虹效果
local hue = 0
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt/2) % 1
    mainTitle.TextColor3 = Color3.fromHSV(hue,1,1)
end)

y = y + 60 -- 下一個選項的 y 位置

            end
        end

        -- ===== 點擊側欄按鈕顯示內容（內容區完全空白） =====
        for i,b in ipairs(buttons) do
            b.Button.MouseButton1Click:Connect(function()
                showContent(i)
            end)
        end

        -- 顯示 / 隱藏主框架
        toggleBtn.MouseButton1Click:Connect(function()
            mainFrame.Visible = not mainFrame.Visible
        end)

        -- ===== 可拖動功能 =====
        local dragging = false
        local dragInput
        local dragStart
        local startPos

        local function update(input)
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end

        titleBar.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                dragStart = input.Position
                startPos = mainFrame.Position

                input.Changed:Connect(function()
                    if input.UserInputState == Enum.UserInputState.End then
                        dragging = false
                    end
                end)
            end
        end)

        titleBar.InputChanged:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseMovement then
                dragInput = input
            end
        end)

        UserInputService.InputChanged:Connect(function(input)
            if input == dragInput and dragging then
                update(input)
            end
        end)

        -- ===== FastAttack 核心執行 =====
        task.spawn(function()
            while _G.FastAttack do
                if Settings.AutoClick then
                    local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if root then
                        local targets = {}
                        for _, folder in ipairs({EnemiesFolder, CharactersFolder}) do
                            for _, obj in ipairs(folder:GetChildren()) do
                                if obj ~= player.Character then
                                    local head = obj:FindFirstChild("Head")
                                    if head and IsAlive(obj) then
                                        local dist = (head.Position - root.Position).Magnitude
                                        if dist <= Settings.Distance then
                                            table.insert(targets,{obj,head})
                                            if #targets >= Settings.MaxTargets then break end
                                        end
                                    end
                                end
                                if #targets >= Settings.MaxTargets then break end
                            end
                            if #targets >= Settings.MaxTargets then break end
                        end

                        local aliveTargets = {}
                        for _, t in ipairs(targets) do
                            if IsAlive(t[1]) then
                                table.insert(aliveTargets, t)
                            end
                        end

                        if #aliveTargets > 0 then
                            RegisterAttack:FireServer(0)
                            RegisterHit:FireServer(aliveTargets[1][2], aliveTargets)
                        end
                    end
                end
                task.wait(Settings.AttackInterval)
            end
        end)
